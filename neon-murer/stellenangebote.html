<!DOCTYPE html>
<html lang="de" id="www-neonmurer-ch">
<head>
  <!-- CDN Preloads für bessere Performance -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://code.jquery.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Stellenangebote - Neon Murer AG</title>
  <link rel="stylesheet" type="text/css" href="../template/inc_css/include.css">
  
  <!-- Font Awesome CDN für Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" crossorigin="anonymous">
  
<link rel="icon" type="image/png" href="../favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="../favicon/favicon.svg" />
  <link rel="shortcut icon" href="../favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Neon Murer" />
  <link rel="manifest" href="../favicon/site.webmanifest" />
  
  <!--[if lt IE 9]><script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script><![endif]-->
  <!--[if gte IE 9]><!--><script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script><!--<![endif]-->
  
  <meta name="description" content="Karriere bei Neon Murer AG - Aktuelle Stellenangebote in der Werbetechnik. Werden Sie Teil unseres Teams mit 75 Jahren Erfahrung.">
  <meta name="keywords" content="Stellenangebote, Karriere, Jobs, Werbetechnik, Neon Murer, Ausbildung, Vollzeit, Teilzeit">
  <link rel="canonical" href="https://www.neonmurer.ch/stellenangebote.html">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script src="../template/assets/js/slick.min.js"></script>
  
  <script src="../template/assets/js/custom.js"></script>

  <!-- ========== TEMPLATE SYSTEM ========== -->
  <script src="../template/assets/js/templates.js"></script>
  <script src="../template/assets/js/simple-template-loader.js"></script>
  
  <!-- Usage Statistics -->
  <script src="../template/assets/js/neon-usage-stats.js"></script>
  
  <!-- Privacy Manager -->
  <script src="../template/assets/js/neon-privacy-manager.js"></script>
  
  <!-- Page Specific CSS -->
  <link rel="stylesheet" href="../template/assets/css/stellenangebote.css">


</head>

<body class="custom">
<!-- ========== HEADER PLACEHOLDER ========== -->
<div id="header-placeholder">
  <!-- Header wird automatisch vom Template Loader geladen -->
  <div class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Header wird geladen...</span>
    </div>
  </div>
</div>

<main>
  <!-- Hero Section -->
  <section class="stellenangebote-hero">
    <div class="container-fluid maxwidth">
      <div class="hero-content">
        <h1 class="hero-title">Stellenangebote</h1>
        <p class="hero-subtitle">Werden Sie Teil unseres erfolgreichen Teams</p>
        <p class="hero-description">
          Seit 75 Jahren stehen wir für Qualität und Innovation in der Werbetechnik. 
          Gestalten Sie mit uns die Zukunft der visuellen Kommunikation und profitieren Sie von unserer Erfahrung, 
          modernen Arbeitsplätzen und einem familiären Arbeitsklima in einem traditionsreichen Unternehmen.
        </p>
      </div>
    </div>
  </section>

  <!-- Jobs Section -->
  <section class="jobs-section">
    <div class="container-fluid maxwidth">
      <div class="section-header">
        <h2 class="section-title">Aktuelle Stellenausschreibungen</h2>
        <p class="section-subtitle">
          Entdecken Sie vielfältige Karrieremöglichkeiten in unserem innovativen Unternehmen
        </p>
      </div>

      <!-- Two Column Layout -->
      <div class="jobs-two-column-layout">
        <!-- Regular Jobs Column -->
        <div class="jobs-column">
          <div class="column-header">
            <h3 class="column-title">Offene Stellen</h3>
            <p class="column-subtitle">Für erfahrene Fachkräfte</p>
          </div>
          <div class="jobs-container regular-jobs" id="regular-jobs-container">
            <!-- Jobs werden hier dynamisch geladen -->
            <div class="loading-spinner">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Jobs werden geladen...</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Apprenticeship Jobs Column -->
        <div class="jobs-column">
          <div class="column-header">
            <h3 class="column-title">Lehrstellen</h3>
            <p class="column-subtitle">Für angehende Fachkräfte</p>
          </div>
          <div class="jobs-container apprentice-jobs" id="apprentice-jobs-container">
            <!-- Lehrstellen werden hier dynamisch geladen -->
            <div class="loading-spinner">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Lehrstellen werden geladen...</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Job Modals -->
<!-- Dynamisches Job Modal -->
<div id="job-modal" class="job-modal">
  <div class="modal-content">
    <div class="modal-header">
      <button class="modal-close" onclick="closeJobModal()">&times;</button>
      <h2 class="modal-job-title" id="modal-job-title">Job Titel</h2>
    </div>
    
    <div class="modal-body" id="modal-job-body">
      <!-- Content wird dynamisch geladen -->
    </div>
    
    <div class="apply-section" id="modal-apply-section">
      <!-- Apply section wird dynamisch geladen -->
    </div>
  </div>
</div>

<!-- ========== FOOTER PLACEHOLDER ========== -->
<div id="footer-placeholder">
  <!-- Footer wird automatisch vom Template Loader geladen -->
  <div class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Footer wird geladen...</span>
    </div>
  </div>
</div>

<script>
// Global variables
let allJobs = [];

// Load jobs when page loads
document.addEventListener('DOMContentLoaded', function() {
  loadJobs();
  
  // Smooth scrolling for anchor links
  const anchors = document.querySelectorAll('a[href^="#"]');
  anchors.forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
});

// Load jobs from API
async function loadJobs() {
  try {
    const response = await fetch('/api/jobs/active');
    const data = await response.json();
    allJobs = data.jobs || [];
    
    renderJobs();
  } catch (error) {
    console.error('Fehler beim Laden der Jobs:', error);
    showErrorMessage();
  }
}

// Render jobs in both columns
function renderJobs() {
  const regularJobsContainer = document.getElementById('regular-jobs-container');
  const apprenticeJobsContainer = document.getElementById('apprentice-jobs-container');
  
  // Clear loading spinners
  regularJobsContainer.innerHTML = '';
  apprenticeJobsContainer.innerHTML = '';
  
  if (allJobs.length === 0) {
    showNoJobsMessage();
    return;
  }
  
  // Separate jobs by type
  const regularJobs = allJobs.filter(job => job.jobType !== 'lehrstelle');
  const apprenticeJobs = allJobs.filter(job => job.jobType === 'lehrstelle');
  
  // Render regular jobs
  if (regularJobs.length > 0) {
    regularJobs.forEach(job => {
      regularJobsContainer.appendChild(createJobCard(job));
    });
  } else {
    regularJobsContainer.innerHTML = '<p class="no-jobs-message">Derzeit keine offenen Stellen verfügbar.</p>';
  }
  
  // Render apprentice jobs
  if (apprenticeJobs.length > 0) {
    apprenticeJobs.forEach(job => {
      apprenticeJobsContainer.appendChild(createJobCard(job));
    });
  } else {
    apprenticeJobsContainer.innerHTML = '<p class="no-jobs-message">Derzeit keine Lehrstellen verfügbar.</p>';
  }
}

// Create job card element
function createJobCard(job) {
  const card = document.createElement('div');
  card.className = 'job-card';
  card.onclick = () => openJobModal(job.id);
  
  // Map department to German
  const departmentMap = {
    'produktion': 'Produktion & Fertigung',
    'grafik': 'Design & Kreation',
    'montage': 'Montage & Installation',
    'administration': 'Administration',
    'verkauf': 'Verkauf & Beratung'
  };
  
  // Map job type to German
  const jobTypeMap = {
    'vollzeit': 'Vollzeit',
    'teilzeit': 'Teilzeit',
    'lehrstelle': 'Lehre',
    'praktikum': 'Praktikum',
    'temporaer': 'Temporär'
  };
  
  // Map location to German
  const locationMap = {
    'neuhaus': 'Neuhaus',
    'uznach': 'Uznach',
    'beide': 'Neuhaus & Uznach'
  };
  
  // Choose icon based on department
  const iconMap = {
    'produktion': 'fa-cog',
    'grafik': 'fa-palette',
    'montage': 'fa-tools',
    'administration': 'fa-building',
    'verkauf': 'fa-handshake'
  };
  
  const icon = iconMap[job.department] || 'fa-briefcase';
  
  card.innerHTML = `
    <div class="job-header">
      <div style="display: flex; align-items: flex-start;">
        <div class="job-icon">
          <i class="fa-solid ${icon}"></i>
        </div>
        <div>
          <h3 class="job-title">${job.title}</h3>
          <span class="job-department">${departmentMap[job.department] || job.department}</span>
        </div>
      </div>
    </div>
    
    <div class="job-details">
      <div class="job-detail-item">
        <i class="fa-solid fa-map-marker-alt"></i>
        <span>${locationMap[job.location] || job.location}</span>
      </div>
      <div class="job-detail-item">
        <i class="fa-solid fa-clock"></i>
        <span>${jobTypeMap[job.jobType] || job.jobType}</span>
      </div>
      <div class="job-detail-item">
        <i class="fa-solid fa-calendar"></i>
        <span>Per sofort</span>
      </div>
    </div>
    
    <div class="job-action">
      <button class="job-btn">Details ansehen</button>
    </div>
  `;
  
  return card;
}

// Open job modal with dynamic content
function openJobModal(jobId) {
  const job = allJobs.find(j => j.id === jobId);
  if (!job) return;
  
  const modal = document.getElementById('job-modal');
  const modalTitle = document.getElementById('modal-job-title');
  const modalBody = document.getElementById('modal-job-body');
  const modalApplySection = document.getElementById('modal-apply-section');
  
  // Set title
  modalTitle.textContent = job.title;
  
  // Set body content
  modalBody.innerHTML = `
    <div class="modal-section">
      <h3 class="modal-section-title">
        <i class="fa-solid fa-info-circle"></i>
        Stellenbeschreibung
      </h3>
      <div class="job-content">
        ${job.content || job.description || '<p>Keine detaillierte Beschreibung verfügbar.</p>'}
      </div>
    </div>
    
    ${job.requirements && job.requirements.length > 0 ? `
    <div class="modal-section">
      <h3 class="modal-section-title">
        <i class="fa-solid fa-list-check"></i>
        Anforderungen
      </h3>
      <ul class="modal-list">
        ${job.requirements.map(req => `<li>${req.text}</li>`).join('')}
      </ul>
    </div>
    ` : ''}
    
    ${job.benefits ? `
    <div class="modal-section">
      <h3 class="modal-section-title">
        <i class="fa-solid fa-star"></i>
        Wir bieten
      </h3>
      <div class="job-benefits">
        ${job.benefits}
      </div>
    </div>
    ` : ''}
  `;
  
  // Set apply section
  modalApplySection.innerHTML = `
    <h3>Interessiert?</h3>
    <p>Senden Sie uns Ihre vollständigen Bewerbungsunterlagen per E-Mail.</p>
    <button class="apply-btn" onclick="window.location.href='mailto:info@neonmurer.ch?subject=Bewerbung%20${encodeURIComponent(job.title)}'">
      Jetzt bewerben
    </button>
  `;
  
  // Show modal
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

// Close job modal
function closeJobModal() {
  const modal = document.getElementById('job-modal');
  modal.classList.remove('active');
  document.body.style.overflow = '';
}

// Show error message
function showErrorMessage() {
  const regularJobsContainer = document.getElementById('regular-jobs-container');
  const apprenticeJobsContainer = document.getElementById('apprentice-jobs-container');
  
  const errorMessage = '<p class="error-message">Fehler beim Laden der Stellenangebote. Bitte versuchen Sie es später erneut.</p>';
  regularJobsContainer.innerHTML = errorMessage;
  apprenticeJobsContainer.innerHTML = errorMessage;
}

// Show no jobs message
function showNoJobsMessage() {
  const regularJobsContainer = document.getElementById('regular-jobs-container');
  const apprenticeJobsContainer = document.getElementById('apprentice-jobs-container');
  
  regularJobsContainer.innerHTML = '<p class="no-jobs-message">Derzeit keine offenen Stellen verfügbar.</p>';
  apprenticeJobsContainer.innerHTML = '<p class="no-jobs-message">Derzeit keine Lehrstellen verfügbar.</p>';
}

// Close modal when clicking outside
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('job-modal')) {
    closeJobModal();
  }
});

// Close modal with ESC key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeJobModal();
  }
});
</script>

  <script src="../template/assets/js/lazy-loading.js"></script>
</body>
</html> 
