<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Murer - Admin Dashboard</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Quill Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="assets/css/admin.css" rel="stylesheet">
    <link href="assets/css/media-modal.css" rel="stylesheet">
    <link href="assets/css/newsletter-designer.css" rel="stylesheet">
    <link href="assets/css/modern-customer-management.css" rel="stylesheet">
    <!-- Media Picker CSS is included in the JS file -->
</head>
<body>
    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="logo" onclick="showSection('dashboard-section')" style="cursor: pointer;" title="ZurÃ¼ck zum Dashboard">
                <div class="logo-icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="blueGlow" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3498db"/>
                                <stop offset="50%" style="stop-color:#5dade2"/>
                                <stop offset="100%" style="stop-color:#85c1e9"/>
                            </linearGradient>
                            <linearGradient id="darkBg" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e2a38"/>
                                <stop offset="100%" style="stop-color:#2c3e50"/>
                            </linearGradient>
                            <linearGradient id="cosmicGlow" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#9b59b6"/>
                                <stop offset="33%" style="stop-color:#3498db"/>
                                <stop offset="66%" style="stop-color:#1abc9c"/>
                                <stop offset="100%" style="stop-color:#f39c12"/>
                                <animate attributeName="gradientTransform" values="rotate(0);rotate(360)" dur="20s" repeatCount="indefinite"/>
                            </linearGradient>
                            <radialGradient id="nebula" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:0.8"/>
                                <stop offset="30%" style="stop-color:#9b59b6;stop-opacity:0.6"/>
                                <stop offset="70%" style="stop-color:#3498db;stop-opacity:0.3"/>
                                <stop offset="100%" style="stop-color:#2c3e50;stop-opacity:0"/>
                                <animate attributeName="r" values="30%;70%;30%" dur="15s" repeatCount="indefinite"/>
                            </radialGradient>
                            <filter id="starGlow">
                                <feGaussianBlur stdDeviation="1" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Deep Space Background -->
                        <rect width="48" height="48" rx="12" fill="url(#darkBg)"/>
                        
                        <!-- Cosmic Nebula Background -->
                        <circle cx="24" cy="24" r="20" fill="url(#nebula)">
                            <animateTransform attributeName="transform" type="rotate" values="0 24 24;360 24 24" dur="25s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- Animated Border with cosmic colors -->
                        <rect width="48" height="48" rx="12" fill="none" stroke="url(#cosmicGlow)" stroke-width="1.5">
                            <animate attributeName="stroke-width" values="1;3;1" dur="4s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.7;1;0.7" dur="3s" repeatCount="indefinite"/>
                        </rect>
                        
                        <!-- Galaxy Spiral Arms -->
                        <g opacity="0.6">
                            <path d="M24 4 Q36 12 32 24 Q28 36 24 44 Q12 36 16 24 Q20 12 24 4" stroke="url(#blueGlow)" stroke-width="0.8" fill="none">
                                <animateTransform attributeName="transform" type="rotate" values="0 24 24;360 24 24" dur="12s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.3;0.8;0.3" dur="6s" repeatCount="indefinite"/>
                            </path>
                            <path d="M44 24 Q36 36 24 32 Q12 28 4 24 Q12 12 24 16 Q36 12 44 24" stroke="url(#cosmicGlow)" stroke-width="0.6" fill="none">
                                <animateTransform attributeName="transform" type="rotate" values="360 24 24;0 24 24" dur="18s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.2;0.7;0.2" dur="8s" repeatCount="indefinite"/>
                            </path>
                        </g>
                        
                        <!-- Multiple Rotating Rings - Galaxy Structure -->
                        <circle cx="24" cy="24" r="22" fill="none" stroke="url(#blueGlow)" stroke-width="0.3" opacity="0.4" stroke-dasharray="3,6">
                            <animateTransform attributeName="transform" type="rotate" values="0 24 24;360 24 24" dur="10s" repeatCount="indefinite"/>
                        </circle>
                        
                        <circle cx="24" cy="24" r="18" fill="none" stroke="url(#cosmicGlow)" stroke-width="0.4" opacity="0.5" stroke-dasharray="2,4">
                            <animateTransform attributeName="transform" type="rotate" values="360 24 24;0 24 24" dur="8s" repeatCount="indefinite"/>
                        </circle>
                        
                        <circle cx="24" cy="24" r="14" fill="none" stroke="url(#blueGlow)" stroke-width="0.5" opacity="0.6" stroke-dasharray="1,3">
                            <animateTransform attributeName="transform" type="rotate" values="0 24 24;360 24 24" dur="6s" repeatCount="indefinite"/>
                        </circle>
                        
                        <circle cx="24" cy="24" r="10" fill="none" stroke="url(#cosmicGlow)" stroke-width="0.6" opacity="0.7" stroke-dasharray="1,2">
                            <animateTransform attributeName="transform" type="rotate" values="360 24 24;0 24 24" dur="4s" repeatCount="indefinite"/>
                        </circle>
                        

                        
                        <!-- Cosmic Star Field -->
                        <g filter="url(#starGlow)">
                            <!-- Twinkling Stars -->
                            <circle cx="8" cy="8" r="0.5" fill="#ffffff">
                                <animate attributeName="opacity" values="0.2;1;0.2" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="r" values="0.3;0.7;0.3" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="40" cy="10" r="0.4" fill="#f39c12">
                                <animate attributeName="opacity" values="0.1;0.8;0.1" dur="2.5s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="42" cy="40" r="0.6" fill="#e74c3c">
                                <animate attributeName="opacity" values="0.3;1;0.3" dur="4s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="6" cy="42" r="0.3" fill="#9b59b6">
                                <animate attributeName="opacity" values="0.2;0.9;0.2" dur="3.5s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="35" cy="6" r="0.4" fill="#1abc9c">
                                <animate attributeName="opacity" values="0.1;1;0.1" dur="2.8s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="10" cy="38" r="0.5" fill="#3498db">
                                <animate attributeName="opacity" values="0.4;1;0.4" dur="3.2s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Cosmic Energy Orbs -->
                        <g opacity="0.8">
                            <!-- Orbiting energy orbs -->
                            <g>
                                <circle cx="34" cy="24" r="2" fill="url(#cosmicGlow)" opacity="0.6">
                                    <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite"/>
                                    <animate attributeName="r" values="1.5;2.5;1.5" dur="2s" repeatCount="indefinite"/>
                                </circle>
                                <animateTransform attributeName="transform" type="rotate" values="0 24 24;360 24 24" dur="5s" repeatCount="indefinite"/>
                            </g>
                            
                            <g>
                                <circle cx="14" cy="24" r="1.8" fill="url(#blueGlow)" opacity="0.7">
                                    <animate attributeName="opacity" values="0.4;1;0.4" dur="1.8s" repeatCount="indefinite"/>
                                    <animate attributeName="r" values="1.3;2.3;1.3" dur="1.8s" repeatCount="indefinite"/>
                                </circle>
                                <animateTransform attributeName="transform" type="rotate" values="180 24 24;540 24 24" dur="7s" repeatCount="indefinite"/>
                            </g>
                            
                            <g>
                                <circle cx="24" cy="34" r="1.6" fill="url(#nebula)" opacity="0.5">
                                    <animate attributeName="opacity" values="0.2;0.7;0.2" dur="2.2s" repeatCount="indefinite"/>
                                    <animate attributeName="r" values="1.2;2.0;1.2" dur="2.2s" repeatCount="indefinite"/>
                                </circle>
                                <animateTransform attributeName="transform" type="rotate" values="90 24 24;450 24 24" dur="6s" repeatCount="indefinite"/>
                            </g>
                            
                            <g>
                                <circle cx="24" cy="14" r="1.4" fill="#e74c3c" opacity="0.6">
                                    <animate attributeName="opacity" values="0.3;0.9;0.3" dur="1.6s" repeatCount="indefinite"/>
                                    <animate attributeName="r" values="1.0;1.8;1.0" dur="1.6s" repeatCount="indefinite"/>
                                </circle>
                                <animateTransform attributeName="transform" type="rotate" values="270 24 24;-90 24 24" dur="8s" repeatCount="indefinite"/>
                            </g>
                        </g>
                        
                        <!-- Shooting Stars / Comets -->
                        <g opacity="0.7">
                            <line x1="4" y1="4" x2="12" y2="12" stroke="url(#cosmicGlow)" stroke-width="1" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.5s" begin="0s;4s" repeatCount="indefinite"/>
                                <animateTransform attributeName="transform" type="translate" values="0,0;40,40" dur="0.5s" begin="0s;4s" repeatCount="indefinite"/>
                            </line>
                            <line x1="44" y1="8" x2="36" y2="16" stroke="url(#blueGlow)" stroke-width="0.8" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.7s" begin="2s;6s" repeatCount="indefinite"/>
                                <animateTransform attributeName="transform" type="translate" values="0,0;-35,35" dur="0.7s" begin="2s;6s" repeatCount="indefinite"/>
                            </line>
                            <line x1="8" y1="44" x2="16" y2="36" stroke="#f39c12" stroke-width="0.6" opacity="0">
                                <animate attributeName="opacity" values="0;1;0" dur="0.4s" begin="3s;7s" repeatCount="indefinite"/>
                                <animateTransform attributeName="transform" type="translate" values="0,0;30,-30" dur="0.4s" begin="3s;7s" repeatCount="indefinite"/>
                            </line>
                        </g>
                        
                        <!-- Central Energy Core -->
                        <circle cx="24" cy="24" r="3" fill="url(#cosmicGlow)" opacity="0.4">
                            <animate attributeName="r" values="2;4;2" dur="3s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.2;0.6;0.2" dur="3s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="24" cy="24" r="1.5" fill="#ffffff" opacity="0.8">
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                            <animate attributeName="r" values="1;2;1" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- Subtle inner glow -->
                        <rect width="46" height="46" x="1" y="1" rx="11" fill="none" stroke="url(#blueGlow)" stroke-width="0.5" opacity="0.4"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <span class="brand-name">Neon Murer</span>
                    <small class="brand-subtitle">Content Management</small>
                </div>
            </div>
        </div>
        
        <ul class="nav nav-pills flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="javascript:void(0)" onclick="showSection('dashboard-section'); return false;">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#contentSubmenu" aria-expanded="false" aria-controls="contentSubmenu">
                    <i class="fas fa-edit"></i>
                    <span>Inhalte verwalten</span>
                </a>
                <div class="collapse" id="contentSubmenu">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('content-section'); return false;">
                                <i class="fas fa-file-alt"></i>
                                <span>Seiten</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('special-pages-section'); return false;">
                                <i class="fas fa-newspaper"></i>
                                <span>Stellenangebote & News</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('category-cards-section'); return false;">
                                <i class="fas fa-th-large"></i>
                                <span>Category Cards</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('company-history-section'); return false;">
                                <i class="fas fa-history"></i>
                                <span>Firmengeschichte</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('fachkompetenzen-section'); return false;">
                                <i class="fas fa-cogs"></i>
                                <span>Fachkompetenzen</span>
                            </a>
                        </li>
                                            <li class="nav-item">
                        <a class="nav-link" href="javascript:void(0)" onclick="showSection('dienstleistungen-section'); return false;">
                            <i class="fas fa-tools"></i>
                            <span>Dienstleistungen</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            
            <!-- Rechtliches MenÃ¼ mit UntermenÃ¼s -->
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#rechtlichesSubmenu" aria-expanded="false" aria-controls="rechtlichesSubmenu">
                    <i class="fas fa-gavel"></i>
                    <span>Rechtliches</span>
                </a>
                <div class="collapse" id="rechtlichesSubmenu">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('impressum-section'); return false;">
                                <i class="fas fa-info-circle"></i>
                                <span>Impressum</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('agb-section'); return false;">
                                <i class="fas fa-file-contract"></i>
                                <span>AGB</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('datenschutz-section'); return false;">
                                <i class="fas fa-shield-alt"></i>
                                <span>Datenschutz</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('media-section'); return false;">
                    <i class="fas fa-images"></i>
                    <span>Medien</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('team-section'); return false;">
                    <i class="fas fa-users"></i>
                    <span>Team</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('customers-section'); return false;">
                    <i class="fas fa-users"></i>
                    <span>Kunden</span>
                </a>
            </li>
            
            <!-- Newsletter MenÃ¼ -->
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('newsletter-section'); return false;">
                    <i class="fas fa-envelope"></i>
                    <span>Newsletter</span>
                </a>
            </li>
            
            <!-- System MenÃ¼ mit UntermenÃ¼s -->
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#systemSubmenu" aria-expanded="false" aria-controls="systemSubmenu">
                    <i class="fas fa-cogs"></i>
                    <span>System</span>
                </a>
                <div class="collapse" id="systemSubmenu">
                    <ul class="nav flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" onclick="showSection('analytics-section'); return false;">
                                <i class="fas fa-chart-line"></i>
                                <span>Analytics</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="tempShowSection('settings-section'); return false;">
                    <i class="fas fa-cog"></i>
                    <span>Einstellungen</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0)" onclick="showSection('docs-section'); return false;">
                    <i class="fas fa-book"></i>
                    <span>Dokumentation</span>
                </a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <span id="sidebar-user-name">Administrator</span>
            </div>
            <a href="#" class="btn btn-outline-light btn-sm">
                <i class="fas fa-sign-out-alt"></i>
                Abmelden
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        <!-- Enhanced Header -->
        <header class="header">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                    <button class="btn btn-outline-secondary d-lg-none" id="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                
                <!-- Center Info -->
                <div class="header-center d-none d-md-flex align-items-center">
                    <div class="status-indicator me-4">
                        <span class="badge bg-success">
                            <i class="fas fa-circle me-1" style="font-size: 0.6rem;"></i>
                            Server Online
                        </span>
                    </div>
                    <div class="current-time me-4">
                        <small class="text-muted">
                            <i class="far fa-clock me-1"></i>
                            <span id="current-time"></span>
                        </small>
                    </div>
                </div>

                <!-- Header Actions -->
                <div class="header-actions d-flex align-items-center">

                    
                    <!-- Quick Create -->
                    <div class="dropdown me-2">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" id="quick-create-btn">
                            <i class="fas fa-plus me-1"></i>
                            Neu erstellen
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><h6 class="dropdown-header">Inhalte erstellen</h6></li>
                            <li><a class="dropdown-item" href="#" onclick="createNewCustomer()">
                                <i class="fas fa-user-plus me-2"></i>Neuer Kunde
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="createNewJob()">
                                <i class="fas fa-briefcase me-2"></i>Stellenanzeige
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="createNewNews()">
                                <i class="fas fa-newspaper me-2"></i>News-Artikel
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="createNewNewsletter()">
                                <i class="fas fa-envelope me-2"></i>Newsletter
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="showSection('media-section')">
                                <i class="fas fa-upload me-2"></i>Medien hochladen
                            </a></li>
                        </ul>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" id="user-menu-btn">
                            <i class="fas fa-user me-1"></i>
                            <span id="current-user-name">Admin</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><h6 class="dropdown-header" id="user-info">Angemeldet als Admin</h6></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="showPasswordChangeModal()">
                                <i class="fas fa-key me-2"></i>Passwort Ã¤ndern
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="showSection('settings-section')">
                                <i class="fas fa-cog me-2"></i>Einstellungen
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="showSection('analytics-section')">
                                <i class="fas fa-chart-bar me-2"></i>Analytics
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" onclick="confirmLogout()">
                                <i class="fas fa-sign-out-alt me-2"></i>Abmelden
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Dashboard</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="showSection('analytics-section')">
                            <i class="fas fa-chart-line"></i>
                            Analytics
                        </button>
                    </div>
                </div>
                
                <!-- Welcome Section -->
                <div class="card mb-4 border-0 bg-light">
                    <div class="card-body text-center py-4">
                        <h4 class="text-primary mb-3">
                            <i class="fas fa-home"></i>
                            Willkommen im Neon Murer CMS
                        </h4>
                        <p class="text-muted mb-0">Was mÃ¶chten Sie heute bearbeiten?</p>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-bolt text-warning"></i>
                            Schnellaktionen
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-primary w-100 h-100 py-3" onclick="tempShowSection('content-section')">
                                    <i class="fas fa-file-alt fa-2x mb-2"></i>
                                    <div>Inhalte bearbeiten</div>
                                    <small class="text-muted">Seiten & Texte verwalten</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-success w-100 h-100 py-3" onclick="showSection('customers-section')">
                                    <i class="fas fa-users fa-2x mb-2"></i>
                                    <div>Kunden verwalten</div>
                                    <small class="text-muted">Kundendatenbank & CRM</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-info w-100 h-100 py-3" onclick="showSection('team-section')">
                                    <i class="fas fa-user-tie fa-2x mb-2"></i>
                                    <div>Team verwalten</div>
                                    <small class="text-muted">Mitarbeiter & Kontakte</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-warning w-100 h-100 py-3" onclick="showSection('media-section')">
                                    <i class="fas fa-images fa-2x mb-2"></i>
                                    <div>Medien verwalten</div>
                                    <small class="text-muted">Bilder & Dateien</small>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Zweite Reihe -->
                        <div class="row g-3 mt-2">
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-danger w-100 h-100 py-3" onclick="showSection('newsletter-section')">
                                    <i class="fas fa-envelope fa-2x mb-2"></i>
                                    <div>Newsletter</div>
                                    <small class="text-muted">E-Mail-Marketing</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-dark w-100 h-100 py-3" onclick="showSection('company-history-section')">
                                    <i class="fas fa-history fa-2x mb-2"></i>
                                    <div>Firmengeschichte</div>
                                    <small class="text-muted">Timeline & Meilensteine</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-secondary w-100 h-100 py-3" onclick="showSection('fachkompetenzen-section')">
                                    <i class="fas fa-cogs fa-2x mb-2"></i>
                                    <div>Fachkompetenzen</div>
                                    <small class="text-muted">Skills & Expertise</small>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-purple w-100 h-100 py-3" onclick="showSection('dienstleistungen-section')" style="border-color: #6f42c1; color: #6f42c1;">
                                    <i class="fas fa-tools fa-2x mb-2"></i>
                                    <div>Dienstleistungen</div>
                                    <small class="text-muted">Services & Angebote</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Overview -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-tachometer-alt text-info"></i>
                            System-Status & Ãbersicht
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-lg-3 col-md-6">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                                            <i class="fas fa-file-alt text-primary fa-lg"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <div class="h4 mb-0" id="totalPagesCount">-</div>
                                        <small class="text-muted">Seiten verwaltet</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="bg-success bg-opacity-10 rounded-circle p-3">
                                            <i class="fas fa-users text-success fa-lg"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <div class="h4 mb-0" id="totalCustomersCount">-</div>
                                        <small class="text-muted">Kunden</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="bg-warning bg-opacity-10 rounded-circle p-3">
                                            <i class="fas fa-images text-warning fa-lg"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <div class="h4 mb-0" id="totalMediaCount">-</div>
                                        <small class="text-muted">Medien-Dateien</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="bg-info bg-opacity-10 rounded-circle p-3">
                                            <i class="fas fa-envelope text-info fa-lg"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <div class="h4 mb-0" id="totalNewsletterCount">-</div>
                                        <small class="text-muted">Newsletter-Abos</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Essential Tools -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-tools text-secondary"></i>
                            Weitere Tools
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-3" onclick="showSection('analytics-section')">
                                    <i class="fas fa-chart-line fa-lg mb-2"></i>
                                    <div>Analytics anzeigen</div>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-3" onclick="tempShowSection('settings-section')">
                                    <i class="fas fa-cog fa-lg mb-2"></i>
                                    <div>Einstellungen</div>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-3" onclick="showSection('special-pages-section')">
                                    <i class="fas fa-newspaper fa-lg mb-2"></i>
                                    <div>Jobs & News</div>
                                </button>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-3" onclick="showSection('category-cards-section')">
                                    <i class="fas fa-th-large fa-lg mb-2"></i>
                                    <div>Category Cards</div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Rechtliche Seiten -->
                        <div class="row g-3 mt-2">
                            <div class="col-lg-4 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-2" onclick="showSection('impressum-section')">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <div>Impressum bearbeiten</div>
                                </button>
                            </div>
                            <div class="col-lg-4 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-2" onclick="showSection('agb-section')">
                                    <i class="fas fa-gavel me-2"></i>
                                    <div>AGB bearbeiten</div>
                                </button>
                            </div>
                            <div class="col-lg-4 col-md-6">
                                <button class="btn btn-outline-secondary w-100 py-2" onclick="showSection('datenschutz-section')">
                                    <i class="fas fa-shield-alt me-2"></i>
                                    <div>Datenschutz bearbeiten</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Analytics & Statistiken</h2>
                    <div>
                        <button class="btn btn-outline-primary" onclick="refreshAnalytics()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                    </div>
                </div>
                
                <!-- Analytics KPI Cards -->
                <div class="row g-4 mb-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="analytics-kpi-card">
                            <div class="kpi-icon bg-primary">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="analyticsUniqueVisitors">-</div>
                                <div class="kpi-label">Besucher (30 Tage)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="analytics-kpi-card">
                            <div class="kpi-icon bg-success">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="analyticsPageViews">-</div>
                                <div class="kpi-label">Seitenaufrufe (30 Tage)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="analytics-kpi-card">
                            <div class="kpi-icon bg-warning">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="analyticsAvgDuration">-</div>
                                <div class="kpi-label">Ã Sitzungsdauer</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="analytics-kpi-card">
                            <div class="kpi-icon bg-info">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="analyticsMobileRatio">-</div>
                                <div class="kpi-label">Mobile Traffic</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Weekly Trend Overview -->
                <div class="row g-4 mb-4">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-chart-line text-primary"></i>
                                    Trend der letzten 7 Tage
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="weeklyTrendChart" class="analytics-trend-chart position-relative">
                                    <!-- Modern Chart Container -->
                                    <div class="chart-container" style="position: relative; height: 300px;">
                                        <canvas id="trendCanvas"></canvas>
                                    </div>
                                    
                                    <!-- Chart Loading Overlay -->
                                    <div id="chartLoading" class="chart-loading-overlay position-absolute top-50 start-50 translate-middle">
                                        <div class="text-center">
                                            <div class="spinner-border text-primary mb-2" role="status"></div>
                                            <p class="mb-0 text-muted">Lade Chart-Daten...</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Chart Controls -->
                                    <div class="chart-controls d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
                                        <div class="chart-period-selector">
                                            <div class="btn-group btn-group-sm" role="group">
                                                <input type="radio" class="btn-check" name="chartPeriod" id="period7d" value="7" checked>
                                                <label class="btn btn-outline-primary" for="period7d">7T</label>
                                                
                                                <input type="radio" class="btn-check" name="chartPeriod" id="period30d" value="30">
                                                <label class="btn btn-outline-primary" for="period30d">30T</label>
                                                
                                                <input type="radio" class="btn-check" name="chartPeriod" id="period90d" value="90">
                                                <label class="btn btn-outline-primary" for="period90d">90T</label>
                                            </div>
                                        </div>
                                        
                                        <div class="chart-options">
                                            <div class="dropdown">
                                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                    <i class="fas fa-chart-line"></i> Typ
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#" data-chart-type="line">Linie</a></li>
                                                    <li><a class="dropdown-item" href="#" data-chart-type="area">FlÃ¤che</a></li>
                                                    <li><a class="dropdown-item" href="#" data-chart-type="bar">Balken</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-external-link-alt text-success"></i>
                                    Traffic-Quellen
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="trafficSourcesList" class="traffic-sources-list">
                                    <div class="text-center p-3 text-muted">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <p class="mb-0 mt-2">Lade Daten...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Countries and Additional Analytics -->
                <div class="row g-4 mb-4">
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-globe text-primary"></i>
                                    Besucher nach LÃ¤ndern
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="countryStatsList" class="country-stats-list">
                                    <div class="text-center p-3 text-muted">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <p class="mb-0 mt-2">Lade LÃ¤nderdaten...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-chart-pie text-info"></i>
                                    LÃ¤nderverteilung
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="countryChartContainer" class="country-chart-container">
                                    <canvas id="countryChart" width="400" height="300"></canvas>
                                    <div id="countryChartLoading" class="chart-loading-overlay position-absolute top-50 start-50 translate-middle">
                                        <div class="text-center">
                                            <div class="spinner-border text-primary mb-2" role="status"></div>
                                            <p class="mb-0 text-muted">Lade Chart...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Top Content Pages -->
                <div class="row g-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-file-alt text-success"></i>
                                    Meistbesuchte Seiten
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="content-performance-list" id="contentPerformanceList">
                                    <div class="text-center p-4 text-muted">
                                        <i class="fas fa-spinner fa-spin fa-2x mb-3"></i>
                                        <p>Lade Analytics-Daten...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Content Management Section -->
            <section id="content-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Inhalte verwalten</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshContentList()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="openContentModal()">
                        <i class="fas fa-plus"></i>
                        Neuer Inhalt
                    </button>
                    </div>
                </div>
                
                <!-- Content Filter -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="contentSearch" placeholder="Suchen nach Titel...">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="contentTypeFilter">
                                    <option value="">Alle Typen</option>
                                    <option value="homepage">Homepage</option>
                                    <option value="service">Service</option>
                                    <option value="page">Seite</option>
                                    <option value="category">Kategorie</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="contentStatusFilter">
                                    <option value="">Alle Status</option>
                                    <option value="published">VerÃ¶ffentlicht</option>
                                    <option value="draft">Entwurf</option>
                                    <option value="archived">Archiviert</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="applyContentFilters()">
                                    <i class="fas fa-filter"></i>
                                    Filtern
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="contentTable">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" id="selectAllContent" onchange="toggleAllContentSelection()">
                                        </th>
                                        <th>Titel</th>
                                        <th>Typ</th>
                                        <th>Status</th>
                                        <th>Letzte Ãnderung</th>
                                        <th>Autor</th>
                                        <th>Aktionen</th>
                                    </tr>
                                </thead>
                                <tbody id="contentTableBody">
                                    <!-- Content will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Bulk Actions -->
                        <div class="mt-3 d-none" id="bulkActions">
                            <div class="d-flex align-items-center gap-2">
                                <span class="text-muted">AusgewÃ¤hlte Aktionen:</span>
                                <button class="btn btn-sm btn-success" onclick="bulkPublish()">
                                    <i class="fas fa-eye"></i>
                                    VerÃ¶ffentlichen
                                            </button>
                                <button class="btn btn-sm btn-warning" onclick="bulkDraft()">
                                                <i class="fas fa-edit"></i>
                                    Als Entwurf
                                            </button>
                                <button class="btn btn-sm btn-danger" onclick="bulkDelete()">
                                                <i class="fas fa-trash"></i>
                                    LÃ¶schen
                                            </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Content Modal -->
            <div class="modal fade" id="contentModal" tabindex="-1" aria-labelledby="contentModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="contentModalLabel">Inhalt bearbeiten</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="contentForm">
                                <div class="row g-4">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="contentTitle" class="form-label">Titel *</label>
                                            <input type="text" class="form-control" id="contentTitle" required>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="contentSlug" class="form-label">URL-Slug</label>
                                            <div class="input-group">
                                                <span class="input-group-text">../</span>
                                                <input type="text" class="form-control" id="contentSlug">
                                                <span class="input-group-text">.html</span>
                                            </div>
                                            <div class="form-text">Automatisch generiert basierend auf dem Titel</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="contentExcerpt" class="form-label">Kurzbeschreibung</label>
                                            <textarea class="form-control" id="contentExcerpt" rows="3" placeholder="Kurze Beschreibung fÃ¼r Vorschau und SEO..."></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="contentBody" class="form-label">Inhalt *</label>
                                            <div id="editorToolbar" class="border rounded-top p-2">
                                                <div class="btn-group btn-group-sm me-2" role="group">
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('bold')">
                                                        <i class="fas fa-bold"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('italic')">
                                                        <i class="fas fa-italic"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('underline')">
                                                        <i class="fas fa-underline"></i>
                                                    </button>
                                                </div>
                                                <div class="btn-group btn-group-sm me-2" role="group">
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('justifyLeft')">
                                                        <i class="fas fa-align-left"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('justifyCenter')">
                                                        <i class="fas fa-align-center"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('justifyRight')">
                                                        <i class="fas fa-align-right"></i>
                                                    </button>
                                                </div>
                                                <div class="btn-group btn-group-sm me-2" role="group">
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('insertUnorderedList')">
                                                        <i class="fas fa-list-ul"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary" onclick="formatText('insertOrderedList')">
                                                        <i class="fas fa-list-ol"></i>
                                                    </button>
                                                </div>
                                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="insertLink()">
                                                    <i class="fas fa-link"></i>
                                                </button>
                                            </div>
                                            <div 
                                                id="contentBody" 
                                                contenteditable="true" 
                                                class="form-control border-top-0 rounded-top-0" 
                                                style="min-height: 300px; outline: none;"
                                                placeholder="Hier den Inhalt eingeben...">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title">Publikation</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="contentStatus" class="form-label">Status</label>
                                                    <select class="form-select" id="contentStatus">
                                                        <option value="draft">Entwurf</option>
                                                        <option value="published">VerÃ¶ffentlicht</option>
                                                        <option value="archived">Archiviert</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="contentType" class="form-label">Typ</label>
                                                    <select class="form-select" id="contentType">
                                                        <option value="page">Seite</option>
                                                        <option value="homepage">Homepage</option>
                                                        <option value="service">Service</option>
                                                        <option value="category">Kategorie</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="contentAuthor" class="form-label">Autor</label>
                                                    <input type="text" class="form-control" id="contentAuthor" value="Administrator" readonly>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="contentTemplate" class="form-label">Template</label>
                                                    <select class="form-select" id="contentTemplate">
                                                        <option value="default">Standard</option>
                                                        <option value="homepage">Homepage</option>
                                                        <option value="service-page">Service-Seite</option>
                                                        <option value="category-page">Kategorie-Seite</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="card mt-3">
                                            <div class="card-header">
                                                <h6 class="card-title">SEO</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="contentMetaTitle" class="form-label">Meta-Titel</label>
                                                    <input type="text" class="form-control" id="contentMetaTitle" maxlength="60">
                                                    <div class="form-text">
                                                        <span id="metaTitleCount">0</span>/60 Zeichen
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="contentMetaDescription" class="form-label">Meta-Beschreibung</label>
                                                    <textarea class="form-control" id="contentMetaDescription" rows="3" maxlength="160"></textarea>
                                                    <div class="form-text">
                                                        <span id="metaDescCount">0</span>/160 Zeichen
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="contentKeywords" class="form-label">Keywords</label>
                                                    <input type="text" class="form-control" id="contentKeywords" placeholder="Keyword1, Keyword2, ...">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                            <button type="button" class="btn btn-outline-primary" onclick="previewContent()">
                                <i class="fas fa-eye"></i>
                                Vorschau
                            </button>
                            <button type="button" class="btn btn-primary" onclick="saveContent()">
                                <i class="fas fa-save"></i>
                                Speichern
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Special Pages Section (Stellenangebote & News) -->
            <section id="special-pages-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Stellenangebote & News</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshSpecialPages()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <div class="btn-group">
                            <button class="btn btn-success" onclick="openSpecialPageModal('stellenangebote')">
                                <i class="fas fa-briefcase"></i>
                                Neues Stellenangebot
                            </button>
                            <button class="btn btn-info" onclick="openSpecialPageModal('news')">
                                <i class="fas fa-newspaper"></i>
                                Neue News
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Special Pages Filter & Tabs -->
                <div class="card mb-4">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="specialPagesTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="jobs-tab" data-bs-toggle="tab" data-bs-target="#jobs-panel" type="button" role="tab">
                                    <i class="fas fa-briefcase me-2"></i>
                                    Stellenangebote
                                    <span class="badge bg-primary ms-2" id="jobsCount">0</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="news-tab" data-bs-toggle="tab" data-bs-target="#news-panel" type="button" role="tab">
                                    <i class="fas fa-newspaper me-2"></i>
                                    News
                                    <span class="badge bg-info ms-2" id="newsCount">0</span>
                                </button>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="specialPagesTabContent">
                            <!-- Stellenangebote Panel -->
                            <div class="tab-pane fade show active" id="jobs-panel" role="tabpanel">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" id="jobsSearch" placeholder="Stellenangebote suchen...">
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="jobsStatusFilter">
                                            <option value="">Alle Status</option>
                                            <option value="PUBLISHED">VerÃ¶ffentlicht</option>
                                            <option value="DRAFT">Entwurf</option>
                                            <option value="ARCHIVED">Archiviert</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-secondary w-100" onclick="applyJobsFilter()">
                                            <i class="fas fa-filter"></i>
                                            Filtern
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="special-pages-grid" id="jobsGrid">
                                    <!-- Jobs will be populated here -->
                                </div>
                            </div>
                            
                            <!-- News Panel -->
                            <div class="tab-pane fade" id="news-panel" role="tabpanel">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" id="newsSearch" placeholder="News suchen...">
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="newsStatusFilter">
                                            <option value="">Alle Status</option>
                                            <option value="PUBLISHED">VerÃ¶ffentlicht</option>
                                            <option value="DRAFT">Entwurf</option>
                                            <option value="ARCHIVED">Archiviert</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-outline-secondary w-100" onclick="applyNewsFilter()">
                                            <i class="fas fa-filter"></i>
                                            Filtern
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="special-pages-grid" id="newsGrid">
                                    <!-- News will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Empty State -->
                <div class="text-center py-5 d-none" id="specialPagesEmpty">
                    <i class="fas fa-newspaper fa-3x text-muted mb-3"></i>
                    <h5 class="text-muted">Keine EintrÃ¤ge gefunden</h5>
                    <p class="text-muted">Erstellen Sie Ihr erstes Stellenangebot oder Ihre erste News.</p>
                    <div class="mt-3">
                        <button class="btn btn-success me-2" onclick="openSpecialPageModal('stellenangebote')">
                            <i class="fas fa-briefcase"></i>
                            Stellenangebot erstellen
                        </button>
                        <button class="btn btn-info" onclick="openSpecialPageModal('news')">
                            <i class="fas fa-newspaper"></i>
                            News erstellen
                        </button>
                    </div>
                </div>
            </section>

            <!-- Media Management Section -->
            <section id="media-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Medien verwalten</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshMediaList()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="openUploadModal()">
                        <i class="fas fa-upload"></i>
                        Dateien hochladen
                    </button>
                    </div>
                </div>
                
                <!-- Media Filter and Search -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="mediaSearch" placeholder="Suchen nach Dateiname...">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="mediaTypeFilter">
                                    <option value="">Alle Dateitypen</option>
                                    <option value="image">Bilder</option>
                                    <option value="document">Dokumente</option>
                                    <option value="other">Andere</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="mediaSizeFilter">
                                    <option value="">Alle GrÃ¶Ãen</option>
                                    <option value="small">Klein (&lt; 500KB)</option>
                                    <option value="medium">Mittel (500KB - 2MB)</option>
                                    <option value="large">GroÃ (&gt; 2MB)</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="applyMediaFilters()">
                                    <i class="fas fa-filter"></i>
                                    Filtern
                                        </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Media Stats -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="card border-primary">
                            <div class="card-body text-center">
                                <i class="fas fa-images text-primary fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="totalMediaCount">0</div>
                                <small class="text-muted">Dateien gesamt</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-success">
                            <div class="card-body text-center">
                                <i class="fas fa-image text-success fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="imageCount">0</div>
                                <small class="text-muted">Bilder</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-info">
                            <div class="card-body text-center">
                                <i class="fas fa-file-pdf text-info fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="documentCount">0</div>
                                <small class="text-muted">Dokumente</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-warning">
                            <div class="card-body text-center">
                                <i class="fas fa-hdd text-warning fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="totalSize">0 MB</div>
                                <small class="text-muted">GesamtgrÃ¶Ãe</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- View Mode Toggle -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                        <span class="me-3">Ansicht:</span>
                        <div class="btn-group" role="group">
                            <input type="radio" class="btn-check" name="viewMode" id="gridView" checked onchange="setViewMode('grid')">
                            <label class="btn btn-outline-secondary" for="gridView">
                                <i class="fas fa-th"></i>
                                Raster
                            </label>
                            <input type="radio" class="btn-check" name="viewMode" id="listView" onchange="setViewMode('list')">
                            <label class="btn btn-outline-secondary" for="listView">
                                <i class="fas fa-list"></i>
                                Liste
                            </label>
                        </div>
                    </div>
                    
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-sort"></i>
                            Sortieren
                                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="sortMedia('name')">Name</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortMedia('date')">Datum</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortMedia('size')">GrÃ¶Ãe</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortMedia('type')">Typ</a></li>
                        </ul>
                                    </div>
                                </div>
                
                <!-- Media Grid/List -->
                <div class="card">
                    <div class="card-body">
                        <!-- Loading State -->
                        <div id="mediaLoading" class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">LÃ¤dt...</span>
                            </div>
                            <div class="mt-2">Medien werden geladen...</div>
                        </div>
                        
                        <!-- Grid View -->
                        <div id="mediaGrid" class="media-grid d-none">
                            <!-- Media items will be populated by JavaScript -->
                        </div>
                        
                        <!-- List View -->
                        <div id="mediaList" class="media-list d-none">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th width="50"></th>
                                            <th>Name</th>
                                            <th>Typ</th>
                                            <th>GrÃ¶Ãe</th>
                                            <th>Erstellt</th>
                                            <th>Aktionen</th>
                                        </tr>
                                    </thead>
                                    <tbody id="mediaListBody">
                                        <!-- Media list items will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Empty State -->
                        <div id="mediaEmpty" class="text-center py-5 d-none">
                            <i class="fas fa-images fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted">Keine Medien gefunden</h5>
                            <p class="text-muted">Laden Sie Ihre ersten Dateien hoch oder passen Sie die Filter an.</p>
                            <button class="btn btn-primary" onclick="openUploadModal()">
                                <i class="fas fa-upload"></i>
                                Dateien hochladen
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Special Pages Modal (Stellenangebote & News) -->
            <div class="modal fade" id="specialPageModal" tabindex="-1" aria-labelledby="specialPageModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="specialPageModalLabel">
                                <i class="fas fa-briefcase me-2"></i>
                                Stellenangebot bearbeiten
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="specialPageForm">
                                <input type="hidden" id="specialPageType" value="">
                                <div class="row g-4">
                                    <div class="col-md-8">
                                        <!-- Basic Information -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Grundinformationen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="specialPageTitle" class="form-label">Titel *</label>
                                                    <input type="text" class="form-control" id="specialPageTitle" required>
                                                </div>
                                                
                                                <!-- Job-specific fields -->
                                                <div id="jobSpecificFields" class="d-none">
                                                    <div class="row g-3 mb-3">
                                                        <div class="col-md-6">
                                                            <label for="jobPosition" class="form-label">Position</label>
                                                            <input type="text" class="form-control" id="jobPosition" placeholder="z.B. Grafiker/in">
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="jobDepartment" class="form-label">Abteilung</label>
                                                            <select class="form-select" id="jobDepartment">
                                                                <option value="">Abteilung wÃ¤hlen</option>
                                                                <option value="produktion">Produktion</option>
                                                                <option value="grafik">Grafik & Design</option>
                                                                <option value="montage">Montage & Aussendienst</option>
                                                                <option value="administration">Administration</option>
                                                                <option value="verkauf">Verkauf & Beratung</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row g-3 mb-3">
                                                        <div class="col-md-6">
                                                            <label for="jobType" class="form-label">Anstellungsart</label>
                                                            <select class="form-select" id="jobType">
                                                                <option value="vollzeit">Vollzeit</option>
                                                                <option value="teilzeit">Teilzeit</option>
                                                                <option value="lehrstelle">Lehrstelle</option>
                                                                <option value="praktikum">Praktikum</option>
                                                                <option value="temporaer">TemporÃ¤r</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="jobLocation" class="form-label">Arbeitsort</label>
                                                            <select class="form-select" id="jobLocation">
                                                                <option value="neuhaus">Neuhaus</option>
                                                                <option value="uznach">Uznach</option>
                                                                <option value="beide">Beide Standorte</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                                                <!-- News-specific fields -->
                                <div id="newsSpecificFields" class="d-none">
                                    <div class="row g-3 mb-3">
                                        <div class="col-md-6">
                                            <label for="newsCategory" class="form-label">Kategorie</label>
                                            <select class="form-select" id="newsCategory">
                                                <option value="unternehmen">Unternehmen</option>
                                                <option value="projekte">Projekte</option>
                                                <option value="technologie">Technologie</option>
                                                <option value="team">Team</option>
                                                <option value="events">Events</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="newsDate" class="form-label">Datum</label>
                                            <input type="date" class="form-control" id="newsDate">
                                        </div>
                                    </div>
                                    <div class="row g-3 mb-3">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="newsIsFeatured">
                                                <label class="form-check-label" for="newsIsFeatured">
                                                    <i class="fas fa-star text-warning"></i>
                                                    Featured News
                                                </label>
                                                <div class="form-text">Wird prominent auf der Startseite angezeigt</div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="newsIsBreaking">
                                                <label class="form-check-label" for="newsIsBreaking">
                                                    <i class="fas fa-exclamation-triangle text-danger"></i>
                                                    Eilmeldung
                                                </label>
                                                <div class="form-text">Wird als Eilmeldung hervorgehoben</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="specialPageExcerpt" class="form-label">Kurzbeschreibung</label>
                                                    <textarea class="form-control" id="specialPageExcerpt" rows="3" placeholder="Kurze Zusammenfassung fÃ¼r die Ãbersicht..."></textarea>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="specialPageContent" class="form-label">Inhalt *</label>
                                                    <div id="specialPageEditorToolbar" class="border rounded-top p-2">
                                                        <div class="btn-group btn-group-sm me-2" role="group">
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('bold')">
                                                                <i class="fas fa-bold"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('italic')">
                                                                <i class="fas fa-italic"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('underline')">
                                                                <i class="fas fa-underline"></i>
                                                            </button>
                                                        </div>
                                                        <div class="btn-group btn-group-sm me-2" role="group">
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('justifyLeft')">
                                                                <i class="fas fa-align-left"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('justifyCenter')">
                                                                <i class="fas fa-align-center"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('justifyRight')">
                                                                <i class="fas fa-align-right"></i>
                                                            </button>
                                                        </div>
                                                        <div class="btn-group btn-group-sm me-2" role="group">
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('insertUnorderedList')">
                                                                <i class="fas fa-list-ul"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-outline-secondary" onclick="formatSpecialPageText('insertOrderedList')">
                                                                <i class="fas fa-list-ol"></i>
                                                            </button>
                                                        </div>
                                                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="insertSpecialPageLink()">
                                                            <i class="fas fa-link"></i>
                                                        </button>
                                                    </div>
                                                    <div 
                                                        id="specialPageContent" 
                                                        contenteditable="true" 
                                                        class="form-control border-top-0 rounded-top-0" 
                                                        style="min-height: 300px; outline: none;"
                                                        placeholder="Hier den Inhalt eingeben...">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Job Requirements (only for jobs) -->
                                        <div class="card d-none" id="jobRequirementsCard">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Anforderungen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div id="jobRequirements">
                                                    <div class="requirement-item mb-2">
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-check-circle text-primary"></i>
                                                            </span>
                                                            <input type="text" class="form-control" placeholder="Anforderung eingeben">
                                                            <button class="btn btn-outline-danger" type="button" onclick="removeRequirement(this)">
                                                                <i class="fas fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="addRequirement()">
                                                    <i class="fas fa-plus"></i>
                                                    Anforderung hinzufÃ¼gen
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <!-- Publication Settings -->
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Publikation</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="specialPageStatus" class="form-label">Status</label>
                                                                                        <select class="form-select" id="specialPageStatus">
                                        <option value="DRAFT">Entwurf</option>
                                        <option value="PUBLISHED">VerÃ¶ffentlicht</option>
                                        <option value="ARCHIVED">Archiviert</option>
                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="specialPageAuthor" class="form-label">Autor</label>
                                                    <input type="text" class="form-control" id="specialPageAuthor" value="Administrator" readonly>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="specialPageShowOnWebsite">
                                                        <label class="form-check-label" for="specialPageShowOnWebsite">
                                                            Auf Website anzeigen
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3" id="jobValidUntilContainer">
                                                    <label for="jobValidUntil" class="form-label">GÃ¼ltig bis</label>
                                                    <input type="date" class="form-control" id="jobValidUntil">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Featured Image -->
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Featured Image</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="specialPageFeaturedImage" class="form-label">Bild-URL</label>
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" id="specialPageFeaturedImage" placeholder="Bild-URL eingeben...">
                                                        <button type="button" class="btn btn-outline-primary" onclick="openMediaPickerForField('specialPageFeaturedImage')">
                                                            <i class="fas fa-images"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <div class="featured-image-preview" id="specialPageImagePreview">
                                                    <img src="" alt="Preview" class="img-fluid rounded d-none" id="specialPagePreviewImg">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- SEO -->
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">SEO</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="specialPageMetaTitle" class="form-label">Meta-Titel</label>
                                                    <input type="text" class="form-control" id="specialPageMetaTitle" maxlength="60">
                                                    <div class="form-text">
                                                        <span id="specialPageMetaTitleCount">0</span>/60 Zeichen
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="specialPageMetaDescription" class="form-label">Meta-Beschreibung</label>
                                                    <textarea class="form-control" id="specialPageMetaDescription" rows="3" maxlength="160"></textarea>
                                                    <div class="form-text">
                                                        <span id="specialPageMetaDescCount">0</span>/160 Zeichen
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="specialPageKeywords" class="form-label">Keywords</label>
                                                    <input type="text" class="form-control" id="specialPageKeywords" placeholder="Keyword1, Keyword2, ...">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                            <button type="button" class="btn btn-outline-primary" onclick="previewSpecialPage()">
                                <i class="fas fa-eye"></i>
                                Vorschau
                            </button>
                            <button type="button" class="btn btn-primary" onclick="saveSpecialPage()">
                                <i class="fas fa-save"></i>
                                Speichern
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upload Modal -->
            <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="uploadModalLabel">Dateien hochladen</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!-- Drag & Drop Area -->
                            <div id="dropZone" class="drop-zone">
                                <div class="drop-zone-content">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                    <h5>Dateien hier ablegen</h5>
                                    <p class="text-muted">oder</p>
                                    <button type="button" class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                                        <i class="fas fa-folder-open"></i>
                                        Dateien auswÃ¤hlen
                                    </button>
                                    <input type="file" id="fileInput" multiple accept="image/*,.pdf,.doc,.docx,.txt" style="display: none;" onchange="handleFileSelection(this.files)">
                                    <div class="mt-3">
                                        <small class="text-muted">
                                            UnterstÃ¼tzte Formate: JPG, PNG, GIF, PDF, DOC, TXT<br>
                                            Maximale DateigrÃ¶Ãe: 10 MB pro Datei
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Upload Progress -->
                            <div id="uploadProgress" class="d-none">
                                <h6>Upload-Fortschritt</h6>
                                <div id="uploadList">
                                    <!-- Upload items will be added here -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃen</button>
                            <button type="button" class="btn btn-success d-none" id="uploadCompleteBtn" onclick="closeUploadModal()">
                                <i class="fas fa-check"></i>
                                Fertig
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Media Detail Modal - Redesigned -->
            <div class="modal fade" id="mediaModal" tabindex="-1" aria-labelledby="mediaModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header border-0 pb-0">
                            <h5 class="modal-title d-flex align-items-center" id="mediaModalLabel">
                                <i class="fas fa-image text-primary me-2"></i>
                                <span id="mediaModalTitle">Mediendatei</span>
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body p-4">
                            <!-- Main Content -->
                            <div class="row g-4">
                                <!-- Image Preview - Left Side -->
                                <div class="col-lg-7">
                                    <div class="card border-0 shadow-sm">
                                        <div class="card-body p-0">
                                            <div id="mediaPreview" class="media-preview-modern rounded overflow-hidden">
                                                <!-- Media preview will be shown here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Info Panel - Right Side -->
                                <div class="col-lg-5">
                                    <!-- Quick Info Card -->
                                    <div class="card border-0 shadow-sm mb-3">
                                        <div class="card-header bg-light border-0">
                                            <h6 class="mb-0 text-dark">
                                                <i class="fas fa-info-circle text-primary me-2"></i>
                                                Datei-Details
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="row g-3 text-sm">
                                                <div class="col-6">
                                                    <div class="d-flex flex-column">
                                                        <span class="text-muted small">Typ</span>
                                                        <span id="mediaType" class="fw-semibold"></span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex flex-column">
                                                        <span class="text-muted small">GrÃ¶Ãe</span>
                                                        <span id="mediaSize" class="fw-semibold"></span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex flex-column">
                                                        <span class="text-muted small">Dimensionen</span>
                                                        <span id="mediaDimensions" class="fw-semibold"></span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex flex-column">
                                                        <span class="text-muted small">Erstellt</span>
                                                        <span id="mediaDate" class="fw-semibold"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- URL Copy Card -->
                                    <div class="card border-0 shadow-sm mb-3">
                                        <div class="card-header bg-light border-0">
                                            <h6 class="mb-0 text-dark">
                                                <i class="fas fa-link text-primary me-2"></i>
                                                Datei-URL
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="input-group">
                                                <input type="text" class="form-control border-0 bg-light" id="mediaURL" readonly>
                                                <button class="btn btn-outline-primary" onclick="copyToClipboard('mediaURL')" title="URL kopieren">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Meta Data Card -->
                                    <div class="card border-0 shadow-sm">
                                        <div class="card-header bg-light border-0">
                                            <h6 class="mb-0 text-dark">
                                                <i class="fas fa-edit text-primary me-2"></i>
                                                Meta-Daten
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label small text-muted">Dateiname</label>
                                                <input type="text" class="form-control border-0 bg-light" id="mediaFileName" readonly>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label small text-muted">Alt-Text (SEO)</label>
                                                <input type="text" class="form-control" id="mediaAltText" placeholder="Beschreibung fÃ¼r Suchmaschinen">
                                            </div>
                                            <div class="mb-0">
                                                <label class="form-label small text-muted">Beschreibung</label>
                                                <textarea class="form-control" id="mediaDescription" rows="2" placeholder="Optionale Beschreibung"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Modern Footer -->
                        <div class="modal-footer border-0 pt-0">
                            <div class="d-flex gap-2 w-100">
                                <button type="button" class="btn btn-outline-danger" onclick="deleteMediaFile()">
                                    <i class="fas fa-trash-alt me-2"></i>
                                    LÃ¶schen
                                </button>
                                <div class="ms-auto d-flex gap-2">
                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                        SchlieÃen
                                    </button>
                                    <button type="button" class="btn btn-primary" onclick="saveMediaInfo()">
                                        <i class="fas fa-check me-2"></i>
                                        Speichern
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services Section -->
            <section id="services-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Dienstleistungen</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshServiceList()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="openServiceModal()">
                        <i class="fas fa-plus"></i>
                        Service hinzufÃ¼gen
                    </button>
                    </div>
                </div>
                
                <!-- Service Filter -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="serviceSearch" placeholder="Suchen nach Name...">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="serviceCategoryFilter">
                                    <option value="">Alle Kategorien</option>
                                    <option value="lichtwerbung">Lichtwerbung</option>
                                    <option value="beschriftung">Beschriftung</option>
                                    <option value="druck">Druck & Medien</option>
                                    <option value="montage">Montage & Service</option>
                                    <option value="beratung">Beratung & Planung</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="serviceStatusFilter">
                                    <option value="">Alle Status</option>
                                    <option value="active">Aktiv</option>
                                    <option value="inactive">Inaktiv</option>
                                    <option value="featured">Featured</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="applyServiceFilters()">
                                    <i class="fas fa-filter"></i>
                                    Filtern
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Service View Toggle -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                        <span class="me-3">Ansicht:</span>
                        <div class="btn-group" role="group">
                            <input type="radio" class="btn-check" name="serviceViewMode" id="serviceCardView" checked onchange="setServiceViewMode('cards')">
                            <label class="btn btn-outline-secondary" for="serviceCardView">
                                <i class="fas fa-th"></i>
                                Karten
                            </label>
                            <input type="radio" class="btn-check" name="serviceViewMode" id="serviceTableView" onchange="setServiceViewMode('table')">
                            <label class="btn btn-outline-secondary" for="serviceTableView">
                                <i class="fas fa-list"></i>
                                Tabelle
                            </label>
                        </div>
                    </div>
                    
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-sort"></i>
                            Sortieren
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="sortServices('name')">Name</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortServices('category')">Kategorie</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortServices('order')">Reihenfolge</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortServices('status')">Status</a></li>
                        </ul>
                    </div>
                </div>
                
                <!-- Service Content -->
                <div id="serviceContent">
                    <!-- Loading State -->
                    <div id="serviceLoading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">LÃ¤dt...</span>
                        </div>
                        <div class="mt-2">Services werden geladen...</div>
                    </div>
                    
                    <!-- Card View -->
                    <div id="serviceCardView-content" class="d-none">
                        <div class="row g-4" id="serviceCardsContainer">
                            <!-- Service cards will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Table View -->
                    <div id="serviceTableView-content" class="d-none">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th width="50"></th>
                                                <th>Name</th>
                                                <th>Kategorie</th>
                                                <th>Status</th>
                                                <th>Reihenfolge</th>
                                                <th>Erstellt</th>
                                                <th width="150">Aktionen</th>
                                            </tr>
                                        </thead>
                                        <tbody id="serviceTableBody">
                                            <!-- Service table rows will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Empty State -->
                    <div id="serviceEmpty" class="text-center py-5 d-none">
                        <i class="fas fa-cog fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">Keine Services gefunden</h5>
                        <p class="text-muted">Erstellen Sie Ihren ersten Service oder passen Sie die Filter an.</p>
                        <button class="btn btn-primary" onclick="openServiceModal()">
                            <i class="fas fa-plus"></i>
                            Service hinzufÃ¼gen
                        </button>
                    </div>
                </div>
            </section>

            <!-- Projects Section (HIDDEN) -->
            <section id="projects-section" class="content-section" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Projekte</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshProjectList()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="openProjectModal()">
                        <i class="fas fa-plus"></i>
                        Projekt hinzufÃ¼gen
                    </button>
                    </div>
                </div>
                
                <!-- Project Filter -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <input type="text" class="form-control" id="projectSearch" placeholder="Suchen nach Projekt oder Kunde...">
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="projectCategoryFilter">
                                    <option value="">Alle Kategorien</option>
                                    <option value="fahrzeugbeschriftung">Fahrzeugbeschriftung</option>
                                    <option value="lichtwerbung">Lichtwerbung</option>
                                    <option value="grossformatdruck">Grossformatdruck</option>
                                    <option value="fensterbeschriftung">Fensterbeschriftung</option>
                                    <option value="signaletik">Signaletik</option>
                                    <option value="pylonen">Pylonen</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="projectStatusFilter">
                                    <option value="">Alle Status</option>
                                    <option value="completed">Abgeschlossen</option>
                                    <option value="featured">Featured</option>
                                    <option value="archived">Archiviert</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="projectYearFilter">
                                    <option value="">Alle Jahre</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="applyProjectFilters()">
                                    <i class="fas fa-filter"></i>
                                    Filtern
                                </button>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-outline-danger w-100" onclick="clearProjectFilters()" title="Filter zurÃ¼cksetzen">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Project Stats -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="card border-primary">
                            <div class="card-body text-center">
                                <i class="fas fa-briefcase text-primary fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="totalProjectCount">0</div>
                                <small class="text-muted">Projekte gesamt</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-success">
                            <div class="card-body text-center">
                                <i class="fas fa-check-circle text-success fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="completedProjectCount">0</div>
                                <small class="text-muted">Abgeschlossen</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-warning">
                            <div class="card-body text-center">
                                <i class="fas fa-star text-warning fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="featuredProjectCount">0</div>
                                <small class="text-muted">Featured</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-info">
                            <div class="card-body text-center">
                                <i class="fas fa-building text-info fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="uniqueCustomerCount">0</div>
                                <small class="text-muted">Kunden</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- View Mode Toggle -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                        <span class="me-3">Ansicht:</span>
                        <div class="btn-group" role="group">
                            <input type="radio" class="btn-check" name="projectViewMode" id="projectGridView" checked onchange="setProjectViewMode('grid')">
                            <label class="btn btn-outline-secondary" for="projectGridView">
                                <i class="fas fa-th"></i>
                                Raster
                            </label>
                            <input type="radio" class="btn-check" name="projectViewMode" id="projectListView" onchange="setProjectViewMode('list')">
                            <label class="btn btn-outline-secondary" for="projectListView">
                                <i class="fas fa-list"></i>
                                Liste
                            </label>
                        </div>
                    </div>
                    
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-sort"></i>
                            Sortieren
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="sortProjects('date')">Datum (neueste zuerst)</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortProjects('name')">Projektname</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortProjects('customer')">Kunde</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortProjects('category')">Kategorie</a></li>
                        </ul>
                    </div>
                </div>
                
                <!-- Project Content -->
                <div id="projectContent">
                    <!-- Loading State -->
                    <div id="projectLoading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">LÃ¤dt...</span>
                        </div>
                        <div class="mt-2">Projekte werden geladen...</div>
                    </div>
                    
                    <!-- Grid View -->
                    <div id="projectGridView-content" class="d-none">
                        <div class="row g-4" id="projectGridContainer">
                            <!-- Project cards will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- List View -->
                    <div id="projectListView-content" class="d-none">
                <div class="card">
                    <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th width="60"></th>
                                                <th>Projekt</th>
                                                <th>Kunde</th>
                                                <th>Kategorie</th>
                                                <th>Status</th>
                                                <th>Datum</th>
                                                <th width="120">Aktionen</th>
                                            </tr>
                                        </thead>
                                        <tbody id="projectListBody">
                                            <!-- Project list items will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Empty State -->
                    <div id="projectEmpty" class="text-center py-5 d-none">
                        <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">Keine Projekte gefunden</h5>
                        <p class="text-muted">Erstellen Sie Ihr erstes Projekt oder passen Sie die Filter an.</p>
                        <button class="btn btn-primary" onclick="openProjectModal()">
                            <i class="fas fa-plus"></i>
                            Projekt hinzufÃ¼gen
                        </button>
                    </div>
                </div>
            </section>

            <!-- Project Detail Modal -->
            <div class="modal fade" id="projectDetailModal" tabindex="-1" aria-labelledby="projectDetailModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="projectDetailModalLabel">Projekt Details</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <!-- Image Gallery -->
                                    <div id="projectImageGallery" class="project-gallery mb-4">
                                        <!-- Main image will be populated by JavaScript -->
                                    </div>
                                    
                                    <!-- Project Description -->
                                    <div id="projectDetailDescription">
                                        <!-- Description will be populated by JavaScript -->
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="project-info">
                                        <h6>Projekt-Informationen</h6>
                                        <div class="info-grid">
                                            <div class="info-item">
                                                <label>Kunde:</label>
                                                <span id="projectDetailCustomer"></span>
                                            </div>
                                            <div class="info-item">
                                                <label>Kategorie:</label>
                                                <span id="projectDetailCategory"></span>
                                            </div>
                                            <div class="info-item">
                                                <label>Status:</label>
                                                <span id="projectDetailStatus"></span>
                                            </div>
                                            <div class="info-item">
                                                <label>Datum:</label>
                                                <span id="projectDetailDate"></span>
                                            </div>
                                            <div class="info-item">
                                                <label>Ort:</label>
                                                <span id="projectDetailLocation"></span>
                                            </div>
                                            <div class="info-item">
                                                <label>Dauer:</label>
                                                <span id="projectDetailDuration"></span>
                                            </div>
                                        </div>
                                        
                                        <div id="projectDetailServices" class="mt-3">
                                            <h6>Erbrachte Leistungen</h6>
                                            <!-- Services will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃen</button>
                            <button type="button" class="btn btn-primary" onclick="editProjectFromDetail()">
                                <i class="fas fa-edit"></i>
                                Bearbeiten
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project Edit Modal -->
            <div class="modal fade" id="projectModal" tabindex="-1" aria-labelledby="projectModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="projectModalLabel">Projekt bearbeiten</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="projectForm">
                                <div class="row g-4">
                                    <div class="col-md-8">
                                        <!-- Basic Information -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Grundinformationen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="row g-3">
                                                    <div class="col-md-8">
                                                        <label for="projectName" class="form-label">Projektname *</label>
                                                        <input type="text" class="form-control" id="projectName" required>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="projectDate" class="form-label">Datum *</label>
                                                        <input type="date" class="form-control" id="projectDate" required>
                                                    </div>
                                                </div>
                                                
                                                <div class="row g-3 mt-1">
                                                    <div class="col-md-6">
                                                        <label for="projectCustomer" class="form-label">Kunde *</label>
                                                        <input type="text" class="form-control" id="projectCustomer" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="projectLocation" class="form-label">Ort</label>
                                                        <input type="text" class="form-control" id="projectLocation" placeholder="z.B. ZÃ¼rich, Schweiz">
                                                    </div>
                                                </div>
                                                
                                                <div class="mt-3">
                                                    <label for="projectDescription" class="form-label">Beschreibung</label>
                                                    <textarea class="form-control" id="projectDescription" rows="4" placeholder="Beschreibung des Projekts, Herausforderungen und LÃ¶sungen..."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Image Gallery Management -->
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Projekt-Galerie</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="projectImageUpload" class="form-label">Bilder hochladen</label>
                                                    <input type="file" class="form-control" id="projectImageUpload" multiple accept="image/*" onchange="handleProjectImageUpload(this.files)">
                                                    <div class="form-text">Mehrere Bilder auswÃ¤hlen mÃ¶glich. Erstes Bild wird als Hauptbild verwendet.</div>
                                                </div>
                                                
                                                <div id="projectImagePreview" class="project-image-preview">
                                                    <!-- Image previews will be populated by JavaScript -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <!-- Settings -->
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Einstellungen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="projectCategory" class="form-label">Kategorie</label>
                                                    <select class="form-select" id="projectCategory">
                                                        <option value="fahrzeugbeschriftung">Fahrzeugbeschriftung</option>
                                                        <option value="lichtwerbung">Lichtwerbung</option>
                                                        <option value="grossformatdruck">Grossformatdruck</option>
                                                        <option value="fensterbeschriftung">Fensterbeschriftung</option>
                                                        <option value="signaletik">Signaletik</option>
                                                        <option value="pylonen">Pylonen</option>
                                                        <option value="sonstiges">Sonstiges</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="projectStatus" class="form-label">Status</label>
                                                    <select class="form-select" id="projectStatus">
                                                        <option value="completed">Abgeschlossen</option>
                                                        <option value="featured">Featured</option>
                                                        <option value="archived">Archiviert</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="projectDuration" class="form-label">Projektdauer</label>
                                                    <input type="text" class="form-control" id="projectDuration" placeholder="z.B. 2 Wochen">
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="projectShowOnWebsite">
                                                        <label class="form-check-label" for="projectShowOnWebsite">
                                                            Auf Website anzeigen
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="projectAllowPublicView">
                                                        <label class="form-check-label" for="projectAllowPublicView">
                                                            Ãffentlich sichtbar
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Services Used -->
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Erbrachte Leistungen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div id="projectServices">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="fahrzeugbeschriftung" id="service_fahrzeugbeschriftung">
                                                        <label class="form-check-label" for="service_fahrzeugbeschriftung">
                                                            Fahrzeugbeschriftung
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="led_leuchtschriften" id="service_led_leuchtschriften">
                                                        <label class="form-check-label" for="service_led_leuchtschriften">
                                                            LED Leuchtschriften
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="grossformatdruck" id="service_grossformatdruck">
                                                        <label class="form-check-label" for="service_grossformatdruck">
                                                            Grossformatdruck
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="fensterbeschriftung" id="service_fensterbeschriftung">
                                                        <label class="form-check-label" for="service_fensterbeschriftung">
                                                            Fensterbeschriftung
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="montage" id="service_montage">
                                                        <label class="form-check-label" for="service_montage">
                                                            Montage & Installation
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="beratung" id="service_beratung">
                                                        <label class="form-check-label" for="service_beratung">
                                                            Beratung & Planung
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                            <button type="button" class="btn btn-outline-primary" onclick="previewProject()">
                                <i class="fas fa-eye"></i>
                                Vorschau
                            </button>
                            <button type="button" class="btn btn-primary" onclick="saveProject()">
                                <i class="fas fa-save"></i>
                                Speichern
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </section>

            <!-- Team Section -->
            <section id="team-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2><i class="fas fa-users me-2"></i>Team-Verwaltung</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="loadTeamMembersData()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="showCreateTeamMemberModal()">
                            <i class="fas fa-plus"></i>
                            Team-Mitglied hinzufÃ¼gen
                        </button>
                    </div>
                </div>
                
                <!-- Team Statistics -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="card border-primary">
                            <div class="card-body text-center">
                                <i class="fas fa-users text-primary fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="totalTeamMembersCount">0</div>
                                <small class="text-muted">Team-Mitglieder gesamt</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-success">
                            <div class="card-body text-center">
                                <i class="fas fa-user-check text-success fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="activeTeamMembersCount">0</div>
                                <small class="text-muted">Aktive Mitglieder</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-info">
                            <div class="card-body text-center">
                                <i class="fas fa-eye text-info fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="publicTeamMembersCount">0</div>
                                <small class="text-muted">Ãffentlich sichtbar</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card border-warning">
                            <div class="card-body text-center">
                                <i class="fas fa-map-marker-alt text-warning fa-2x mb-2"></i>
                                <div class="h4 mb-0" id="teamLocationsCount">2</div>
                                <small class="text-muted">Standorte</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Filter & Search -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="teamSearchInput" class="form-label">Suchen</label>
                                <input type="text" class="form-control" id="teamSearchInput" placeholder="Name, E-Mail oder Position..." oninput="filterTeamMembers()">
                            </div>
                            <div class="col-md-2">
                                <label for="teamStatusFilter" class="form-label">Status</label>
                                <select class="form-select" id="teamStatusFilter" onchange="filterTeamMembers()">
                                    <option value="">Alle Status</option>
                                    <option value="active">Aktiv</option>
                                    <option value="inactive">Inaktiv</option>
                                    <option value="public">Ãffentlich</option>
                                    <option value="private">Privat</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="teamLocationFilter" class="form-label">Standort</label>
                                <select class="form-select" id="teamLocationFilter" onchange="filterTeamMembers()">
                                    <option value="">Alle Standorte</option>
                                    <option value="Werk Uznach">Werk Uznach</option>
                                    <option value="Werk Jona">Werk Jona</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label class="form-label">&nbsp;</label>
                                <div class="d-grid">
                                    <button class="btn btn-outline-secondary" onclick="clearTeamFilters()">
                                        <i class="fas fa-times"></i>
                                        Filter zurÃ¼cksetzen
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Team Members Table -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th width="80">Reihenfolge</th>
                                        <th>Person</th>
                                        <th>Position</th>
                                        <th>Standort</th>
                                        <th>Telefon</th>
                                        <th>Status</th>
                                        <th width="160">Aktionen</th>
                                    </tr>
                                </thead>
                                <tbody id="teamMembersTable">
                                    <tr>
                                        <td colspan="7" class="text-center py-4">
                                            <div class="spinner-border text-primary" role="status">
                                                <span class="visually-hidden">LÃ¤dt...</span>
                                            </div>
                                            <div class="mt-2">Team-Mitglieder werden geladen...</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Team Member Modal -->
            <div class="modal fade" id="teamModal" tabindex="-1" aria-labelledby="teamModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="teamModalLabel">Mitarbeiter bearbeiten</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="teamForm">
                                <div class="row g-4">
                                    <div class="col-md-8">
                                        <!-- Personal Information -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">PersÃ¶nliche Informationen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label for="teamFirstName" class="form-label">Vorname *</label>
                                                        <input type="text" class="form-control" id="teamFirstName" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="teamLastName" class="form-label">Nachname *</label>
                                                        <input type="text" class="form-control" id="teamLastName" required>
                                                    </div>
                                                </div>
                                                
                                                <div class="row g-3 mt-1">
                                                    <div class="col-md-6">
                                                        <label for="teamEmail" class="form-label">E-Mail</label>
                                                        <input type="email" class="form-control" id="teamEmail">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="teamPhone" class="form-label">Telefon</label>
                                                        <input type="tel" class="form-control" id="teamPhone">
                                                    </div>
                                                </div>
                                                
                                                <div class="mt-3">
                                                    <label for="teamBio" class="form-label">Kurze Beschreibung</label>
                                                    <textarea class="form-control" id="teamBio" rows="3" placeholder="Kurze Beschreibung der Person, Hobbys, Besonderheiten..."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Skills & Qualifications -->
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">FÃ¤higkeiten & Qualifikationen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div id="teamSkills">
                                                    <div class="skill-item mb-2">
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                <i class="fas fa-star text-warning"></i>
                                                            </span>
                                                            <input type="text" class="form-control" placeholder="FÃ¤higkeit oder Qualifikation eingeben">
                                                            <button class="btn btn-outline-danger" type="button" onclick="removeSkill(this)">
                                                                <i class="fas fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="addSkill()">
                                                    <i class="fas fa-plus"></i>
                                                    FÃ¤higkeit hinzufÃ¼gen
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <!-- Profile Image -->
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Profilbild</h6>
                                            </div>
                                            <div class="card-body text-center">
                                                <div class="profile-image-preview mb-3">
                                                    <img id="teamProfilePreview" src="../content/images/person1.jpg" alt="Profilbild" class="img-fluid rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                                                </div>
                                                <input type="file" class="form-control mb-2" id="teamProfileImage" accept="image/*" onchange="previewTeamImage(this)">
                                                <div class="form-text">Empfohlen: Quadratisches Bild, mindestens 200x200px</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Position & Department -->
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Position & Abteilung</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="teamPosition" class="form-label">Position *</label>
                                                    <input type="text" class="form-control" id="teamPosition" required placeholder="z.B. GeschÃ¤ftsfÃ¼hrer">
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="teamDepartment" class="form-label">Abteilung</label>
                                                    <select class="form-select" id="teamDepartment">
                                                        <option value="geschaeftsleitung">GeschÃ¤ftsleitung</option>
                                                        <option value="produktion">Produktion</option>
                                                        <option value="montage">Montage & Service</option>
                                                        <option value="design">Design & Grafik</option>
                                                        <option value="verwaltung">Verwaltung</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="teamPositionLevel" class="form-label">Positions-Level</label>
                                                    <select class="form-select" id="teamPositionLevel">
                                                        <option value="geschaeftsfuehrer">GeschÃ¤ftsfÃ¼hrer</option>
                                                        <option value="abteilungsleiter">Abteilungsleiter</option>
                                                        <option value="fachkraft">Fachkraft</option>
                                                        <option value="lehrling">Lehrling</option>
                                                        <option value="teilzeit">Teilzeit</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="teamStartDate" class="form-label">Startdatum</label>
                                                    <input type="date" class="form-control" id="teamStartDate">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Settings -->
                                        <div class="card">
                                            <div class="card-header">
                                                <h6 class="card-title mb-0">Einstellungen</h6>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="teamStatus" class="form-label">Status</label>
                                                    <select class="form-select" id="teamStatus">
                                                        <option value="active">Aktiv</option>
                                                        <option value="vacation">Im Urlaub</option>
                                                        <option value="sick">Krank</option>
                                                        <option value="inactive">Inaktiv</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="teamShowOnWebsite">
                                                        <label class="form-check-label" for="teamShowOnWebsite">
                                                            Auf Website anzeigen
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="teamShowContact">
                                                        <label class="form-check-label" for="teamShowContact">
                                                            Kontaktdaten anzeigen
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="teamIsManager">
                                                        <label class="form-check-label" for="teamIsManager">
                                                            FÃ¼hrungsposition
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                            <button type="button" class="btn btn-outline-primary" onclick="previewTeamMember()">
                                <i class="fas fa-eye"></i>
                                Vorschau
                            </button>
                            <button type="button" class="btn btn-primary" onclick="saveTeamMember()">
                                <i class="fas fa-save"></i>
                                Speichern
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <section id="settings-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Einstellungen</h2>
                    <div>
                        <button class="btn btn-outline-secondary me-2" onclick="resetSettings()">
                            <i class="fas fa-undo"></i>
                            ZurÃ¼cksetzen
                        </button>
                        <button class="btn btn-outline-primary me-2" onclick="exportSettings()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                        <button class="btn btn-success" onclick="saveAllSettings()">
                            <i class="fas fa-save"></i>
                            Alle speichern
                        </button>
                    </div>
                </div>
                
                <!-- Settings Navigation -->
                <div class="settings-nav mb-4">
                    <ul class="nav nav-pills" id="settings-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="general-tab" data-bs-toggle="pill" data-bs-target="#general-settings" type="button" role="tab">
                                <i class="fas fa-cog"></i>
                                Allgemein
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="seo-tab" data-bs-toggle="pill" data-bs-target="#seo-settings" type="button" role="tab">
                                <i class="fas fa-search"></i>
                                SEO
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="email-tab" data-bs-toggle="pill" data-bs-target="#email-settings" type="button" role="tab">
                                <i class="fas fa-envelope"></i>
                                E-Mail
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="security-tab" data-bs-toggle="pill" data-bs-target="#security-settings" type="button" role="tab">
                                <i class="fas fa-shield-alt"></i>
                                Sicherheit
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="backup-tab" data-bs-toggle="pill" data-bs-target="#backup-settings" type="button" role="tab">
                                <i class="fas fa-database"></i>
                                Backup
                            </button>
                        </li>
                    </ul>
                </div>
                
                <!-- Settings Content -->
                <div class="tab-content" id="settings-content">
                    <!-- General Settings -->
                    <div class="tab-pane fade show active" id="general-settings" role="tabpanel">
                        <div class="row g-4">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-info-circle text-primary"></i>
                                            Website Informationen
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="generalSettingsForm">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">Website Titel</label>
                                                    <input type="text" class="form-control" id="siteTitle" placeholder="LÃ¤dt...">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Tagline</label>
                                                    <input type="text" class="form-control" id="siteTagline" placeholder="LÃ¤dt...">
                                                </div>
                                                <div class="col-12">
                                                    <label class="form-label">Website Beschreibung</label>
                                                    <textarea class="form-control" id="siteDescription" rows="3" placeholder="LÃ¤dt..."></textarea>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Kontakt E-Mail</label>
                                                    <input type="email" class="form-control" id="contactEmail" placeholder="LÃ¤dt...">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Kontakt Telefon</label>
                                                    <input type="tel" class="form-control" id="contactPhone" placeholder="LÃ¤dt...">
                                                </div>
                                            </div>
                                            <div class="mt-3">
                                                <button type="button" class="btn btn-primary" onclick="saveGeneralSettings()">
                                                    <i class="fas fa-save"></i>
                                                    Allgemeine Einstellungen speichern
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-info text-info"></i>
                                            Status
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="fas fa-check-circle text-success me-2"></i>
                                            <span>Website konfiguriert</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="fas fa-check-circle text-success me-2"></i>
                                            <span>Kontaktdaten gesetzt</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                            <span id="generalSettingsStatus">LÃ¤dt...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- SEO Settings -->
                    <div class="tab-pane fade" id="seo-settings" role="tabpanel">
                        <div class="row g-4">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-search text-success"></i>
                                            SEO & Analytics
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="seoSettingsForm">
                                            <div class="row g-3">
                                                <div class="col-12">
                                                    <label class="form-label">Google Analytics ID</label>
                                                    <input type="text" class="form-control" id="googleAnalyticsId" placeholder="G-XXXXXXXXXX oder UA-XXXXXXXX-X">
                                                    <div class="form-text">FÃ¼r Website-Statistiken (optional)</div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="enableSitemap" checked>
                                                        <label class="form-check-label" for="enableSitemap">
                                                            XML Sitemap automatisch generieren
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-3">
                                                <button type="button" class="btn btn-primary me-2" onclick="saveSEOSettings()">
                                                    <i class="fas fa-save"></i>
                                                    SEO Einstellungen speichern
                                                </button>
                                                <button type="button" class="btn btn-outline-secondary" onclick="generateSitemap()">
                                                    <i class="fas fa-sitemap"></i>
                                                    Sitemap jetzt generieren
                                                </button>
                                            </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-chart-line text-primary"></i>
                                            SEO Status
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="seo-check-list">
                                            <div class="seo-check-item">
                                                <i class="fas fa-check-circle text-success"></i>
                                                <span>Meta Title gesetzt</span>
                                            </div>
                                            <div class="seo-check-item">
                                                <i class="fas fa-check-circle text-success"></i>
                                                <span>Meta Description gesetzt</span>
                                            </div>
                                            <div class="seo-check-item">
                                                <i class="fas fa-check-circle text-success"></i>
                                                <span>Sitemap aktiv</span>
                                            </div>
                                            <div class="seo-check-item">
                                                <i class="fas fa-exclamation-triangle text-warning"></i>
                                                <span>Google Analytics nicht konfiguriert</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-4">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-tools text-info"></i>
                                            SEO Tools
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-outline-primary btn-sm" onclick="generateSitemap()">
                                                <i class="fas fa-sitemap"></i>
                                                Sitemap generieren
                                            </button>
                                            <button class="btn btn-outline-secondary btn-sm" onclick="testRobots()">
                                                <i class="fas fa-robot"></i>
                                                Robots.txt testen
                                            </button>
                                            <button class="btn btn-outline-info btn-sm" onclick="analyzeKeywords()">
                                                <i class="fas fa-key"></i>
                                                Keywords analysieren
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    
                    <!-- Email Settings -->
                    <div class="tab-pane fade" id="email-settings" role="tabpanel">
                        <div class="row g-4">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-server text-primary"></i>
                                            SMTP Konfiguration
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="emailSettingsForm">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">SMTP Server</label>
                                                    <input type="text" class="form-control" id="smtpHost" placeholder="mail.neonmurer.ch">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Port</label>
                                                    <select class="form-select" id="smtpPort">
                                                        <option value="25">25 (Standard)</option>
                                                        <option value="587" selected>587 (TLS)</option>
                                                        <option value="465">465 (SSL)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Benutzername</label>
                                                    <input type="text" class="form-control" id="smtpUsername" placeholder="info@neonmurer.ch" autocomplete="username">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Passwort</label>
                                                    <input type="password" class="form-control" id="smtpPassword" placeholder="â¢â¢â¢â¢â¢â¢â¢â¢" autocomplete="current-password">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">VerschlÃ¼sselung</label>
                                                    <select class="form-select" id="smtpEncryption">
                                                        <option value="tls" selected>TLS</option>
                                                        <option value="ssl">SSL</option>
                                                        <option value="none">Keine</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Absender Name</label>
                                                    <input type="text" class="form-control" id="senderName" value="Neon Murer AG">
                                                </div>
                                                <div class="col-12">
                                                    <label class="form-label">Absender E-Mail</label>
                                                    <input type="email" class="form-control" id="senderEmail" value="info@neonmurer.ch">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-cog text-info"></i>
                                            E-Mail Einstellungen
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary w-100" onclick="saveEmailSettings()">
                                                <i class="fas fa-save"></i>
                                                E-Mail Einstellungen speichern
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card mt-4">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-paper-plane text-success"></i>
                                            Test E-Mail
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Test-EmpfÃ¤nger</label>
                                            <input type="email" class="form-control" id="testEmailRecipient" placeholder="test@example.com">
                                        </div>
                                        <button class="btn btn-primary w-100" onclick="sendTestEmail()">
                                            <i class="fas fa-paper-plane"></i>
                                            Test E-Mail senden
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Settings -->
                    <div class="tab-pane fade" id="security-settings" role="tabpanel">
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-key text-primary"></i>
                                            Passwort Ã¤ndern
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="changePasswordForm">
                                            <!-- Hidden username field for accessibility and password managers -->
                                            <input type="text" name="username" autocomplete="username" style="display: none;" readonly>
                                            <div class="mb-3">
                                                <label for="currentPassword" class="form-label">Aktuelles Passwort</label>
                                                <div class="input-group">
                                                    <input type="password" class="form-control" id="currentPassword" required autocomplete="current-password">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('currentPassword')">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="newPassword" class="form-label">Neues Passwort</label>
                                                <div class="input-group">
                                                    <input type="password" class="form-control" id="newPassword" required minlength="8" autocomplete="new-password">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('newPassword')">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                                <div class="form-text">Mindestens 8 Zeichen</div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="confirmPassword" class="form-label">Passwort bestÃ¤tigen</label>
                                                <div class="input-group">
                                                    <input type="password" class="form-control" id="confirmPassword" required minlength="8" autocomplete="new-password">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('confirmPassword')">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <!-- Password Strength Indicator -->
                                            <div class="mb-3">
                                                <label class="form-label">Passwort-StÃ¤rke</label>
                                                <div class="progress" style="height: 5px;">
                                                    <div class="progress-bar" id="passwordStrength" role="progressbar" style="width: 0%"></div>
                                                </div>
                                                <small id="passwordStrengthText" class="text-muted">Geben Sie ein neues Passwort ein</small>
                                            </div>

                                            <div class="d-grid">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-save"></i>
                                                    Passwort Ã¤ndern
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-shield-alt text-success"></i>
                                            Sicherheitseinstellungen
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <h6>Aktuelle Sitzung</h6>
                                            <div class="d-flex justify-content-between align-items-center p-3 bg-light rounded">
                                                <div>
                                                    <div class="fw-bold">Administrator</div>
                                                    <small class="text-muted" id="sessionInfo">LÃ¤dt...</small>
                                                </div>
                                                <span class="badge bg-success">Aktiv</span>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <h6>Sicherheitsrichtlinien</h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-check text-success"></i> Passwort-VerschlÃ¼sselung aktiv</li>
                                                <li><i class="fas fa-check text-success"></i> JWT-Tokens verwenden</li>
                                                <li><i class="fas fa-check text-success"></i> HTTPS-Verbindung</li>
                                                <li><i class="fas fa-check text-success"></i> Rate-Limiting aktiv</li>
                                            </ul>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <h6>Empfohlene Aktionen</h6>
                                            <div class="alert alert-info">
                                                <i class="fas fa-info-circle"></i>
                                                <strong>Tipp:</strong> Ãndern Sie Ihr Passwort regelmÃ¤Ãig und verwenden Sie starke PasswÃ¶rter mit mindestens 12 Zeichen.
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button class="btn btn-outline-danger" onclick="logoutAllSessions()">
                                                <i class="fas fa-sign-out-alt"></i>
                                                Alle Sitzungen beenden
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Backup Settings -->
                    <div class="tab-pane fade" id="backup-settings" role="tabpanel">
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-database text-primary"></i>
                                            Backup erstellen
                                        </h5>
                                    </div>
                                    <div class="card-body text-center">
                                        <p>Erstellen Sie ein vollstÃ¤ndiges Backup der Website und Datenbank.</p>
                                        <button class="btn btn-success btn-lg" onclick="createBackup(event)">
                                            <i class="fas fa-plus"></i>
                                            Backup jetzt erstellen
                                        </button>
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                Das Backup enthÃ¤lt alle Inhalte, Bilder und Einstellungen.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-title mb-0">
                                            <i class="fas fa-history text-info"></i>
                                            Backup Historie
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="backupList">
                                            <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                <div>
                                                    <strong>backup_2024_01_15.zip</strong>
                                                    <br><small class="text-muted">15.01.2024, 14:30</small>
                                                </div>
                                                <div>
                                                    <button class="btn btn-sm btn-outline-primary me-1" onclick="downloadBackup('backup_2024_01_15.zip')">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteBackup('backup_2024_01_15.zip')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="text-center py-3">
                                                <small class="text-muted">Weitere Backups werden hier angezeigt</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customer Management Section -->
            <section id="customers-section" class="content-section">
                <!-- Modern Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div class="page-header">
                        <h2 class="mb-1">
                            <div class="d-flex align-items-center">
                                <div class="page-icon bg-primary rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 48px; height: 48px;">
                                    <i class="fas fa-users text-white"></i>
                                </div>
                                <div>
                                    <div class="h4 mb-0">Kundenmanagement</div>
                                    <small class="text-muted" id="customerCountHeader">Verwalten Sie Ihre Kunden</small>
                                </div>
                            </div>
                        </h2>
                    </div>
                    <div class="header-actions d-flex gap-2">
                        <button class="btn btn-primary d-flex align-items-center" onclick="showCustomerModal()">
                            <i class="fas fa-plus me-2"></i>
                            <span>Neuer Kunde</span>
                        </button>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
                                <i class="fas fa-download me-2"></i>Export
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item d-flex align-items-center" href="#" onclick="exportCustomers('excel')">
                                    <i class="fas fa-file-excel text-success me-2"></i>Excel (.xlsx)
                                </a></li>
                                <li><a class="dropdown-item d-flex align-items-center" href="#" onclick="exportCustomers('csv')">
                                    <i class="fas fa-file-csv text-primary me-2"></i>CSV (.csv)
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Modern Statistics Cards -->
                <div class="row g-3 mb-4">
                    <div class="col-xl-3 col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="rounded-circle bg-primary bg-opacity-10 p-3">
                                            <i class="fas fa-users fa-lg text-primary"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <h4 class="mb-0" id="totalCustomers">0</h4>
                                        <p class="text-muted mb-0 small">Kunden gesamt</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="rounded-circle bg-warning bg-opacity-10 p-3">
                                            <i class="fas fa-user-clock fa-lg text-warning"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <h4 class="mb-0" id="prospectCustomers">0</h4>
                                        <p class="text-muted mb-0 small">Interessenten</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="rounded-circle bg-success bg-opacity-10 p-3">
                                            <i class="fas fa-user-check fa-lg text-success"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <h4 class="mb-0" id="activeCustomers">0</h4>
                                        <p class="text-muted mb-0 small">Aktive Kunden</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0">
                                        <div class="rounded-circle bg-info bg-opacity-10 p-3">
                                            <i class="fas fa-crown fa-lg text-info"></i>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <h4 class="mb-0" id="vipCustomers">0</h4>
                                        <p class="text-muted mb-0 small">VIP-Kunden</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modern Search & Filter Bar -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <div class="row g-3 align-items-end">
                            <div class="col-lg-4 col-md-6">
                                <label class="form-label fw-semibold text-muted">
                                    <i class="fas fa-search me-1"></i>Suchen
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="fas fa-search text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0 bg-light" id="customerSearch" 
                                           placeholder="Firmenname, E-Mail oder Stadt...">
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-3">
                                <label class="form-label fw-semibold text-muted">Status</label>
                                <select class="form-select bg-light" id="statusFilter">
                                    <option value="">Alle Status</option>
                                    <option value="PROSPECT">Interessent</option>
                                    <option value="ACTIVE">Aktiv</option>
                                    <option value="INACTIVE">Inaktiv</option>
                                    <option value="VIP">VIP</option>
                                    <option value="LOST">Verloren</option>
                                </select>
                            </div>
                            <div class="col-lg-2 col-md-3">
                                <label class="form-label fw-semibold text-muted">Typ</label>
                                <select class="form-select bg-light" id="typeFilter">
                                    <option value="">Alle Typen</option>
                                    <option value="BUSINESS">Unternehmen</option>
                                    <option value="PRIVATE">Privat</option>
                                    <option value="GOVERNMENT">BehÃ¶rde</option>
                                    <option value="NGO">Non-Profit</option>
                                </select>
                            </div>
                            <div class="col-lg-4 col-md-12">
                                <div class="d-flex gap-2 flex-wrap">
                                    <button class="btn btn-primary px-4" onclick="filterCustomers()">
                                        <i class="fas fa-filter me-2"></i>Filtern
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="clearFilters()">
                                        <i class="fas fa-refresh me-2"></i>ZurÃ¼cksetzen
                                    </button>
                                    <div class="btn-group">
                                        <button class="btn btn-outline-secondary" id="viewToggle" onclick="toggleCustomerView()">
                                            <i class="fas fa-th-large me-2"></i>Karten
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Cards View (Default) -->
                <div id="customersCardsContainer" class="customers-view">
                    <div class="row g-3" id="customersCards">
                        <div class="col-12">
                            <div class="text-center py-5">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Kunden werden geladen...</span>
                                </div>
                                <p class="mt-3 text-muted">Kundendaten werden geladen...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Table View (Hidden by default) -->
                <div id="customersTableContainer" class="customers-view" style="display: none;">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white py-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 fw-semibold">
                                    <i class="fas fa-list me-2 text-muted"></i>Kundenliste
                                </h5>
                                <span id="customerCount" class="badge bg-light text-dark">0 Kunden</span>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover mb-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="border-0 fw-semibold">Unternehmen</th>
                                            <th class="border-0 fw-semibold">Kontakt</th>
                                            <th class="border-0 fw-semibold">Typ</th>
                                            <th class="border-0 fw-semibold">Status</th>
                                            <th class="border-0 fw-semibold">Stadt</th>
                                            <th class="border-0 fw-semibold">Erstellt</th>
                                            <th class="border-0 fw-semibold text-end">Aktionen</th>
                                        </tr>
                                    </thead>
                                    <tbody id="customersTable">
                                        <tr>
                                            <td colspan="7" class="text-center py-5">
                                                <div class="spinner-border text-primary" role="status">
                                                    <span class="visually-hidden">Kunden werden geladen...</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Category Cards Management Section -->
            <section id="category-cards-section" class="content-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2><i class="fas fa-th-large"></i> Category Cards verwalten</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showCreateCardModal()">
                            <i class="fas fa-plus"></i> Neue Card
                        </button>
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <select class="form-select" id="categoryFilter" onchange="filterCategoryCards()">
                                    <option value="">Alle Kategorien</option>
                                    <option value="beschriftungen">Beschriftungen</option>
                                    <option value="lichtwerbung">Lichtwerbung</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="cardSearchInput" placeholder="Suchen nach Titel..." onkeyup="filterCategoryCards()">
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-secondary w-100" onclick="loadCategoryCardsData()">
                                    <i class="fas fa-sync-alt"></i> Aktualisieren
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category Cards Table -->
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Reihenfolge</th>
                                        <th>Titel</th>
                                        <th>Kategorie</th>
                                        <th>Verlinkung</th>
                                        <th>Bild/Farbe</th>
                                        <th>Status</th>
                                        <th>Aktionen</th>
                                    </tr>
                                </thead>
                                <tbody id="categoryCardsTable">
                                    <tr>
                                        <td colspan="7" class="text-center py-4">
                                            <div class="spinner-border text-primary" role="status">
                                                <span class="visually-hidden">Category Cards werden geladen...</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Company History Section -->
            <section id="company-history-section" class="content-section" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2><i class="fas fa-history me-2"></i>Firmengeschichte</h2>
                        <p class="text-muted mb-0">Hero-Bereich, Kapitel und Finale bearbeiten</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="refreshCompanyHistory()">
                            <i class="fas fa-sync-alt"></i>
                            Aktualisieren
                        </button>
                        <button class="btn btn-success" onclick="saveCompanyHistory()">
                            <i class="fas fa-save"></i>
                            Ãnderungen speichern
                        </button>
                    </div>
                </div>

                <!-- Hero Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-image me-2"></i>Hero-Bereich</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Titel</label>
                                <input type="text" class="form-control" id="historyHeroTitle" placeholder="z.B. Unsere Geschichte">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Untertitel</label>
                                <input type="text" class="form-control" id="historyHeroSubtitle" placeholder="z.B. 75 Jahre Leidenschaft fÃ¼r Lichtwerbung">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Hintergrundbild</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="historyHeroBackground" placeholder="URL des Hintergrundbildes">
                                    <button class="btn btn-outline-secondary" type="button" onclick="openMediaPickerForCompanyHistory('historyHeroBackground')">
                                        <i class="fas fa-image"></i> AuswÃ¤hlen
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapters Section -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-book-open me-2"></i>Kapitel</h5>
                        <button class="btn btn-sm btn-primary" onclick="addNewChapter()">
                            <i class="fas fa-plus"></i> Neues Kapitel
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="chaptersContainer">
                            <!-- Chapters will be loaded here -->
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Kapitel werden geladen...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Finale Section -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-flag-checkered me-2"></i>Heute und die Zukunft</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-12">
                                <label class="form-label">Titel</label>
                                <input type="text" class="form-control" id="historyFinaleTitle" placeholder="z.B. Heute und in die Zukunft">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Text</label>
                                <textarea class="form-control" id="historyFinaleText" rows="4" placeholder="Finale-Text..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Documentation Section Start -->
            <section id="docs-section" class="content-section" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2><i class="fas fa-book me-2"></i>Dokumentation</h2>
                    <p class="text-muted mb-0">API-Referenz, Deployment-Guide und Admin-Manual</p>
                </div>
                
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-file-alt me-2"></i>Entwicklerdokumentation
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="card border-primary">
                                            <div class="card-body text-center">
                                                <i class="fas fa-code fa-3x text-primary mb-3"></i>
                                                <h5 class="card-title">API-Referenz</h5>
                                                <p class="card-text">VollstÃ¤ndige OpenAPI/Swagger-Dokumentation aller REST-Endpoints</p>
                                                <a href="/docs/api-documentation.html" target="_blank" class="btn btn-primary">
                                                    <i class="fas fa-external-link-alt me-2"></i>API-Docs Ã¶ffnen
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4 mb-3">
                                        <div class="card border-success">
                                            <div class="card-body text-center">
                                                <i class="fas fa-rocket fa-3x text-success mb-3"></i>
                                                <h5 class="card-title">Deployment-Guide</h5>
                                                <p class="card-text">Schritt-fÃ¼r-Schritt Anleitung fÃ¼r Production-Deployment</p>
                                                <a href="/docs/api-documentation.html#deployment" target="_blank" class="btn btn-success">
                                                    <i class="fas fa-external-link-alt me-2"></i>Deployment Ã¶ffnen
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4 mb-3">
                                        <div class="card border-warning">
                                            <div class="card-body text-center">
                                                <i class="fas fa-user-cog fa-3x text-warning mb-3"></i>
                                                <h5 class="card-title">Admin-Manual</h5>
                                                <p class="card-text">Benutzerhandbuch fÃ¼r Content-Manager und Administratoren</p>
                                                <a href="/docs/api-documentation.html#admin" target="_blank" class="btn btn-warning">
                                                    <i class="fas fa-external-link-alt me-2"></i>Manual Ã¶ffnen
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <hr class="my-4">
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-info-circle me-2 text-info"></i>Schnellzugriff</h6>
                                        <ul class="list-unstyled">
                                            <li><a href="/docs/api-documentation.html#troubleshooting" target="_blank" class="text-decoration-none"><i class="fas fa-tools me-2"></i>Troubleshooting</a></li>
                                            <li><a href="/api/health" target="_blank" class="text-decoration-none"><i class="fas fa-heartbeat me-2"></i>System Health Check</a></li>
                                            <li><a href="/api/health/database" target="_blank" class="text-decoration-none"><i class="fas fa-database me-2"></i>Database Status</a></li>
                                        </ul>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-download me-2 text-info"></i>Downloads</h6>
                                        <ul class="list-unstyled">
                                            <li><a href="/docs/api-spec.yaml" target="_blank" class="text-decoration-none"><i class="fas fa-file-code me-2"></i>OpenAPI Spec (YAML)</a></li>
                                            <li><a href="#" onclick="downloadPostmanCollection()" class="text-decoration-none"><i class="fas fa-file-export me-2"></i>Postman Collection</a></li>
                                            <li><a href="#" onclick="showSystemInfo()" class="text-decoration-none"><i class="fas fa-info me-2"></i>System-Informationen</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Documentation Section End -->
            
            <!-- Fachkompetenzen Section Start -->
            <section id="fachkompetenzen-section" class="content-section" style="display: none;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <h2><i class="fas fa-cogs me-2"></i>Fachkompetenzen</h2>
                            <p class="text-muted">Verwalten Sie die Fachkompetenzen-Seite und einzelne Kompetenz-Karten</p>
                        </div>
                    </div>

                    <!-- Hero Section Settings -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-image me-2"></i>Hero-Bereich</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="fachkompetenzenHeroTitle" class="form-label">Titel</label>
                                                <input type="text" class="form-control" id="fachkompetenzenHeroTitle" 
                                                       placeholder="Unsere Fachkompetenzen">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="fachkompetenzenHeroSubtitle" class="form-label">Untertitel</label>
                                                <input type="text" class="form-control" id="fachkompetenzenHeroSubtitle" 
                                                       placeholder="75 Jahre Erfahrung und Expertise">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="fachkompetenzenHeroDescription" class="form-label">Beschreibung</label>
                                        <textarea class="form-control" id="fachkompetenzenHeroDescription" rows="3"
                                                  placeholder="Von traditioneller Handwerkskunst bis hin zu modernster Technologie..."></textarea>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="mb-3">
                                                <label for="fachkompetenzenHeroBackground" class="form-label">Hintergrundbild URL</label>
                                                <input type="text" class="form-control" id="fachkompetenzenHeroBackground" 
                                                       placeholder="/content/images/hero-background.jpg">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label">&nbsp;</label>
                                            <button class="btn btn-outline-secondary d-block" type="button" 
                                                    onclick="openMediaPickerForFachKompetenzen('fachkompetenzenHeroBackground')">
                                                <i class="fas fa-image"></i> AuswÃ¤hlen
                                            </button>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-primary" id="saveFachKompetenzenHero">
                                            <i class="fas fa-save me-2"></i>Hero speichern
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section Settings -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-cog me-2"></i>Section-Einstellungen</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="fachkompetenzenSectionTitle" class="form-label">Section-Titel</label>
                                                <input type="text" class="form-control" id="fachkompetenzenSectionTitle" 
                                                       placeholder="Unsere Kernkompetenzen">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="text-end" style="margin-top: 32px;">
                                                <button type="button" class="btn btn-primary" id="saveFachKompetenzenSection">
                                                    <i class="fas fa-save me-2"></i>Section speichern
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="fachkompetenzenSectionSubtitle" class="form-label">Section-Untertitel</label>
                                        <textarea class="form-control" id="fachkompetenzenSectionSubtitle" rows="2"
                                                  placeholder="Modernste Technik trifft auf bewÃ¤hrte Handwerkskunst..."></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Kompetenz-Karten Management -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0"><i class="fas fa-th-large me-2"></i>Kompetenz-Karten</h5>
                                    <button type="button" class="btn btn-success" id="addFachKompetenzCard">
                                        <i class="fas fa-plus me-2"></i>Neue Karte
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Titel</th>
                                                    <th>Beschreibung</th>
                                                    <th>Icon</th>
                                                    <th>Features</th>
                                                    <th>Status</th>
                                                    <th>Aktionen</th>
                                                </tr>
                                            </thead>
                                            <tbody id="fachKompetenzCardsTable">
                                                <tr>
                                                    <td colspan="6" class="text-center text-muted">Lade Karten...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Fachkompetenzen Section End -->

            <!-- Dienstleistungen Section Start -->
            <section id="dienstleistungen-section" class="content-section" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2><i class="fas fa-tools me-2"></i>Dienstleistungen</h2>
                        <p class="text-muted">Verwalten Sie die Dienstleistungen-Seite und das Services-Karussell</p>
                    </div>
                </div>

                <!-- Page Content Management -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-edit me-2"></i>Seiten-Inhalt</h5>
                    </div>
                    <div class="card-body">
                        <form id="dienstleistungenPageForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="dienstleistungenTitle" class="form-label">Titel</label>
                                    <input type="text" class="form-control" id="dienstleistungenTitle"
                                        placeholder="Dienstleistungen">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="dienstleistungenSubtitle" class="form-label">Untertitel</label>
                                    <input type="text" class="form-control" id="dienstleistungenSubtitle"
                                        placeholder="Umfassende LÃ¶sungen rund um Ihre Leuchtreklame">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="dienstleistungenDescription" class="form-label">Beschreibung</label>
                                <textarea class="form-control" id="dienstleistungenDescription" rows="4"
                                    placeholder="Wir bieten Ihnen umfassende LÃ¶sungen..."></textarea>
                            </div>
                            <button type="button" class="btn btn-primary" id="saveDienstleistungenPage">
                                <i class="fas fa-save me-2"></i>Seiten-Inhalt speichern
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Services Management -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5><i class="fas fa-list me-2"></i>Services verwalten</h5>
                        <button type="button" class="btn btn-success btn-sm" onclick="openServiceModal()">
                            <i class="fas fa-plus me-2"></i>Neuer Service
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="servicesContainer">
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Services werden geladen...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Dienstleistungen Section End -->
            
            <!-- Newsletter Section Start -->
            <section id="newsletter-section" class="content-section" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2><i class="fas fa-envelope me-2"></i>Newsletter Management</h2>
                        <p class="text-muted">Verwalten Sie Newsletter und Abonnenten</p>
                    </div>
                </div>
                
                <!-- Navigation Tabs -->
                <ul class="nav nav-tabs mb-4" id="newsletter-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="designer-tab" data-bs-toggle="tab" data-bs-target="#designer-content" type="button" role="tab">
                            <i class="fas fa-edit me-2"></i>Newsletter Designer
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="subscribers-tab" data-bs-toggle="tab" data-bs-target="#subscribers-content" type="button" role="tab">
                            <i class="fas fa-users me-2"></i>Abonnenten
                        </button>
                    </li>
                </ul>
                
                <!-- Tab Content -->
                <div class="tab-content" id="newsletter-tab-content">
                    <!-- Designer Tab -->
                    <div class="tab-pane fade show active" id="designer-content" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h4>Newsletter Designer</h4>
                                <p class="text-muted">Erstellen Sie professionelle Newsletter mit dem Drag & Drop Editor</p>
                            </div>
                            <button class="btn btn-primary" onclick="createNewNewsletter()">
                                <i class="fas fa-plus me-2"></i>Neuer Newsletter
                            </button>
                        </div>

                <!-- Newsletter Templates List -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-list me-2"></i>Gespeicherte Newsletter-Templates</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="newsletter-templates-table">
                                        <thead>
                                            <tr>
                                                <th>Vorschau</th>
                                                <th>Name</th>
                                                <th>Erstellt</th>
                                                <th>Aktualisiert</th>
                                                <th>Aktionen</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Templates werden hier geladen -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Newsletter Designer -->
                <div id="newsletter-designer" style="display: none;">
                    <div class="container-fluid">
                        <div class="row g-3">
                            <div class="col-xl-3 col-lg-4">
                                <!-- Block Library -->
                                <div class="card h-100">
                                    <div class="card-header bg-primary text-white">
                                        <h6 class="mb-0"><i class="fas fa-th-large me-2"></i>Content-BlÃ¶cke</h6>
                                    </div>
                                    <div class="card-body p-3" style="max-height: 75vh; overflow-y: auto;">
                                        <div id="newsletter-blocks">
                                            <!-- Blocks werden hier geladen -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xl-6 col-lg-8">
                                <!-- Designer Canvas -->
                                <div class="card h-100">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0"><i class="fas fa-edit me-2"></i>Newsletter Editor</h6>
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-secondary active" id="desktop-view" onclick="setPreviewMode('desktop')" title="Desktop">
                                                <i class="fas fa-desktop"></i>
                                            </button>
                                            <button class="btn btn-outline-secondary" id="mobile-view" onclick="setPreviewMode('mobile')" title="Mobile">
                                                <i class="fas fa-mobile-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body p-2" style="max-height: 65vh; overflow-y: auto;">
                                        <div id="newsletter-canvas" class="newsletter-canvas">
                                            <div class="canvas-placeholder">
                                                <i class="fas fa-plus-circle fa-3x text-muted"></i>
                                                <p class="text-muted mt-3">Ziehen Sie Content-BlÃ¶cke hierher um zu beginnen</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <!-- Action Buttons -->
                                        <div class="d-flex flex-wrap gap-2">
                                            <button class="btn btn-secondary btn-sm" onclick="cancelNewsletterEdit()">
                                                <i class="fas fa-times me-1"></i>Abbrechen
                                            </button>
                                            <button class="btn btn-info btn-sm" onclick="previewNewsletter()">
                                                <i class="fas fa-eye me-1"></i>Vorschau
                                            </button>
                                            <button class="btn btn-warning btn-sm" onclick="saveNewsletter()">
                                                <i class="fas fa-save me-1"></i>Speichern
                                            </button>
                                            <button class="btn btn-success btn-sm" onclick="exportNewsletterHTML()">
                                                <i class="fas fa-code me-1"></i>HTML exportieren
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xl-3 col-lg-12">
                                <!-- Properties Panel -->
                                <div class="card h-100">
                                    <div class="card-header bg-info text-white">
                                        <h6 class="mb-0"><i class="fas fa-cog me-2"></i>Eigenschaften</h6>
                                    </div>
                                    <div class="card-body" style="max-height: 75vh; overflow-y: auto;">
                                        <div id="newsletter-properties">
                                            <div class="text-center text-muted py-4">
                                                <i class="fas fa-mouse-pointer fa-2x mb-3"></i>
                                                <p class="mb-0">WÃ¤hlen Sie einen Block aus um die Eigenschaften zu bearbeiten</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    </div>
                    <!-- Designer Tab End -->
                    
                    <!-- Subscribers Tab -->
                    <div class="tab-pane fade" id="subscribers-content" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h4>Newsletter-Abonnenten</h4>
                                <p class="text-muted">Verwalten Sie Ihre Newsletter-Abonnenten und exportieren Sie Listen</p>
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-success" onclick="exportSubscribers()">
                                    <i class="fas fa-download me-2"></i>CSV Export
                                </button>
                                <button class="btn btn-outline-primary" onclick="refreshSubscribers()">
                                    <i class="fas fa-sync me-2"></i>Aktualisieren
                                </button>
                            </div>
                        </div>
                        
                        <!-- Filter und Suche -->
                        <div class="card mb-4">
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="subscriber-search" class="form-label">Suche</label>
                                        <input type="text" class="form-control" id="subscriber-search" placeholder="Email, Vorname oder Nachname eingeben...">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="subscriber-status-filter" class="form-label">Status</label>
                                        <select class="form-select" id="subscriber-status-filter">
                                            <option value="active">Aktiv</option>
                                            <option value="inactive">Inaktiv</option>
                                            <option value="all">Alle</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 d-flex align-items-end">
                                        <button class="btn btn-outline-secondary w-100" onclick="applySubscriberFilters()">
                                            <i class="fas fa-search me-2"></i>Filter anwenden
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Statistiken -->
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <div class="card text-center border-success">
                                    <div class="card-body">
                                        <i class="fas fa-user-check fa-2x text-success mb-2"></i>
                                        <h4 class="card-title mb-1" id="active-subscribers-count">0</h4>
                                        <p class="card-text text-muted">Aktive Abonnenten</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-center border-warning">
                                    <div class="card-body">
                                        <i class="fas fa-user-times fa-2x text-warning mb-2"></i>
                                        <h4 class="card-title mb-1" id="inactive-subscribers-count">0</h4>
                                        <p class="card-text text-muted">Abgemeldet</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-center border-info">
                                    <div class="card-body">
                                        <i class="fas fa-calendar-day fa-2x text-info mb-2"></i>
                                        <h4 class="card-title mb-1" id="today-subscribers-count">0</h4>
                                        <p class="card-text text-muted">Heute neu</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Abonnenten-Tabelle -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-list me-2"></i>Abonnenten-Liste
                                    <span class="badge bg-primary ms-2" id="total-subscribers-badge">0</span>
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="subscribers-table">
                                        <thead>
                                            <tr>
                                                <th>Email</th>
                                                <th>Name</th>
                                                <th>Status</th>
                                                <th>Quelle</th>
                                                <th>Angemeldet am</th>
                                                <th>Aktionen</th>
                                            </tr>
                                        </thead>
                                        <tbody id="subscribers-table-body">
                                            <!-- Abonnenten werden hier geladen -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Pagination -->
                                <nav aria-label="Abonnenten Navigation">
                                    <ul class="pagination justify-content-center mt-3" id="subscribers-pagination">
                                        <!-- Pagination wird hier generiert -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                    <!-- Subscribers Tab End -->
                </div>
                <!-- Tab Content End -->
            </section>
            <!-- Newsletter Section End -->
            
            <!-- Impressum Section -->
            <section id="impressum-section" class="content-section" style="display: none;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h1>Impressum bearbeiten</h1>
                                <button class="btn btn-primary" onclick="saveImpressum()">
                                    <i class="fas fa-save me-2"></i>Speichern
                                </button>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <form id="impressumForm">
                                        <!-- Hero Section -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-star me-2"></i>Hero-Section</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumHeroTitle" class="form-label">HauptÃ¼berschrift</label>
                                                            <input type="text" class="form-control" id="impressumHeroTitle" 
                                                                   placeholder="z.B. Impressum">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="impressumHeroSubtitle" class="form-label">Untertitel</label>
                                                            <input type="text" class="form-control" id="impressumHeroSubtitle" 
                                                                   placeholder="z.B. Anbieterkennzeichnung und rechtliche Hinweise">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumHeroDescription" class="form-label">Beschreibung</label>
                                                            <textarea class="form-control" id="impressumHeroDescription" rows="4" 
                                                                      placeholder="Beschreibungstext fÃ¼r die Hero-Section"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Kontaktadresse -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-building me-2"></i>Kontaktadresse</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumCompanyName" class="form-label">Firmenname</label>
                                                            <input type="text" class="form-control" id="impressumCompanyName" 
                                                                   placeholder="z.B. Neon Murer AG">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="impressumAddress" class="form-label">Adresse</label>
                                                            <textarea class="form-control" id="impressumAddress" rows="3" 
                                                                      placeholder="StraÃe und Hausnummer&#10;PLZ Ort"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumPhone" class="form-label">Telefonnummer</label>
                                                            <input type="text" class="form-control" id="impressumPhone" 
                                                                   placeholder="z.B. +41 (0)55 225 50 25">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="impressumEmail" class="form-label">E-Mail</label>
                                                            <input type="email" class="form-control" id="impressumEmail" 
                                                                   placeholder="z.B. neon@neonmurer.ch">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Firmeninhaber -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-user-tie me-2"></i>Firmeninhaber</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="impressumOwner" class="form-label">Name des Firmeninhabers</label>
                                                    <input type="text" class="form-control" id="impressumOwner" 
                                                           placeholder="z.B. Benno Murer">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Firmennummer und MWST -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-file-contract me-2"></i>Firmennummer und MWST</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumFirmenNummer" class="form-label">Firmennummer</label>
                                                            <input type="text" class="form-control" id="impressumFirmenNummer" 
                                                                   placeholder="z.B. CH-320.3.058.479-4">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumMwst" class="form-label">UID/MWST</label>
                                                            <input type="text" class="form-control" id="impressumMwst" 
                                                                   placeholder="z.B. CHE-112.688.538">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Ãffnungszeiten -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-clock me-2"></i>BÃ¼ro-Ãffnungszeiten</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumOpeningWeekdays" class="form-label">Montag bis Freitag</label>
                                                            <input type="text" class="form-control" id="impressumOpeningWeekdays" 
                                                                   placeholder="z.B. 08.00-12.00 / 13.30-17.00 Uhr">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="impressumOpeningWeekend" class="form-label">Samstag und Sonntag</label>
                                                            <input type="text" class="form-control" id="impressumOpeningWeekend" 
                                                                   placeholder="z.B. geschlossen">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Realisation -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-code me-2"></i>Realisation</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="impressumRealization" class="form-label">Realisation Informationen</label>
                                                    <textarea class="form-control" id="impressumRealization" rows="4" 
                                                              placeholder="Name, E-Mail und Telefonnummer der verantwortlichen Person"></textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Rechtliche Hinweise -->
                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0"><i class="fas fa-gavel me-2"></i>Rechtliche Hinweise</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="impressumLegalText" class="form-label">Rechtlicher Text</label>
                                                    <textarea class="form-control" id="impressumLegalText" rows="8" 
                                                              placeholder="Rechtliche Hinweise, Haftungsausschluss, etc."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- AGB Section -->
            <section id="agb-section" class="content-section" style="display: none;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h1><i class="fas fa-file-contract me-2"></i>Allgemeine GeschÃ¤ftsbedingungen verwalten</h1>
                                <div class="btn-group">
                                    <button class="btn btn-success" onclick="addNewAgbSection()">
                                        <i class="fas fa-plus me-2"></i>Neuer Abschnitt
                                    </button>
                                    <button class="btn btn-primary" onclick="saveAllAgbSections()">
                                        <i class="fas fa-save me-2"></i>Alle speichern
                                    </button>
                                    <button class="btn btn-info" onclick="previewAgb()">
                                        <i class="fas fa-eye me-2"></i>Vorschau
                                </button>
                                </div>
                            </div>
                            
                            <!-- AGB Statistics -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card text-center border-primary">
                                        <div class="card-body">
                                            <i class="fas fa-list-ol fa-2x text-primary mb-2"></i>
                                            <h4 class="card-title mb-1" id="agbTotalCount">0</h4>
                                            <p class="card-text text-muted">Abschnitte</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-success">
                                        <div class="card-body">
                                            <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                                            <h4 class="card-title mb-1" id="agbActiveCount">0</h4>
                                            <p class="card-text text-muted">Aktiv</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-warning">
                                        <div class="card-body">
                                            <i class="fas fa-external-link-alt fa-2x text-warning mb-2"></i>
                                            <h4 class="card-title mb-1" id="agbQuickNavCount">0</h4>
                                            <p class="card-text text-muted">Schnellnav</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-info">
                                        <div class="card-body">
                                            <i class="fas fa-star fa-2x text-info mb-2"></i>
                                            <h4 class="card-title mb-1" id="agbHighlightCount">0</h4>
                                            <p class="card-text text-muted">Hervorgehoben</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AGB Sections List -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="fas fa-list me-2"></i>AGB-Abschnitte
                                        <small class="text-muted ms-2">(Drag & Drop zum Sortieren)</small>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="agbSectionsList" class="agb-sections-container">
                                        <!-- AGB sections will be dynamically loaded here -->
                                        <div class="text-center py-5">
                                            <div class="spinner-border text-primary" role="status">
                                                <span class="visually-hidden">Lade AGB-Abschnitte...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AGB Section Edit Modal -->
                <div class="modal fade" id="agbSectionModal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="fas fa-edit me-2"></i>
                                    <span id="agbModalTitle">AGB-Abschnitt bearbeiten</span>
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="agbSectionForm">
                                    <input type="hidden" id="agbSectionId">
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-8">
                                            <label for="agbSectionTitle" class="form-label">Titel <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="agbSectionTitle" required>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="agbSectionIcon" class="form-label">Icon (Font Awesome)</label>
                                            <div class="input-group">
                                                <span class="input-group-text">
                                                    <i id="agbIconPreview" class="fas fa-info-circle"></i>
                                                </span>
                                                <input type="text" class="form-control" id="agbSectionIcon" 
                                                       placeholder="fa-solid fa-info-circle" onkeyup="updateIconPreview()">
                                                <button class="btn btn-outline-secondary" type="button" onclick="showAgbIconSelector()">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                            </div>
                                            <small class="form-text text-muted">z.B. fa-solid fa-info-circle</small>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label for="agbSectionBoxType" class="form-label">Box-Typ</label>
                                            <select class="form-select" id="agbSectionBoxType">
                                                <option value="DEFAULT">Standard (Grau)</option>
                                                <option value="HIGHLIGHT">Hervorgehoben (Gelb)</option>
                                                <option value="IMPORTANT">Wichtig (Rot)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check mt-4">
                                                <input type="checkbox" class="form-check-input" id="agbSectionShowInQuickNav">
                                                <label class="form-check-label" for="agbSectionShowInQuickNav">
                                                    In Schnellnavigation anzeigen
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check mt-4">
                                                <input type="checkbox" class="form-check-input" id="agbSectionIsActive" checked>
                                                <label class="form-check-label" for="agbSectionIsActive">
                                                    Aktiv
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                        <div class="mb-3">
                                        <label for="agbSectionContent" class="form-label">Inhalt <span class="text-danger">*</span></label>
                                        <div id="agbContentEditor" style="height: 400px;"></div>
                                        <textarea id="agbSectionContent" style="display: none;" required></textarea>
                                        <small class="form-text text-muted">
                                            <strong>Hinweis:</strong> Der Editor unterstÃ¼tzt HTML-Formatierung. 
                                            Verwenden Sie <code>&lt;strong&gt;</code> fÃ¼r fett, <code>&lt;em&gt;</code> fÃ¼r kursiv, etc.
                                        </small>
                                    </div>

                                    <!-- Box Type Preview -->
                                    <div class="mb-3">
                                        <label class="form-label">Vorschau des Box-Typs:</label>
                                        <div id="agbBoxPreview" class="p-3 border rounded">
                                            <h6 id="agbPreviewTitle">Beispiel-Titel</h6>
                                            <p id="agbPreviewContent">Hier wird eine Vorschau des Inhalts mit der gewÃ¤hlten Box-Formatierung angezeigt.</p>
                                        </div>
                                        </div>
                                    </form>
                                </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>Abbrechen
                                </button>
                                <button type="button" class="btn btn-danger" id="deleteAgbSectionBtn" onclick="deleteAgbSection()" style="display: none;">
                                    <i class="fas fa-trash me-2"></i>LÃ¶schen
                                </button>
                                <button type="button" class="btn btn-primary" onclick="saveAgbSection()">
                                    <i class="fas fa-save me-2"></i>Speichern
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Datenschutz Section -->
            <section id="datenschutz-section" class="content-section" style="display: none;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h1>
                                    <i class="fas fa-shield-alt me-2"></i>DatenschutzerklÃ¤rung verwalten
                                </h1>
                                <div class="btn-group">
                                    <button class="btn btn-success" onclick="addNewDatenschutzSection()">
                                        <i class="fas fa-plus me-2"></i>Neuer Abschnitt
                                    </button>
                                    <button class="btn btn-primary" onclick="saveAllDatenschutzSections()">
                                        <i class="fas fa-save me-2"></i>Alle speichern
                                    </button>
                                    <button class="btn btn-info" onclick="window.open('/datenschutz.html', '_blank')">
                                        <i class="fas fa-eye me-2"></i>Vorschau
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Datenschutz Statistics -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card text-center border-primary">
                                        <div class="card-body">
                                            <i class="fas fa-list-ol fa-2x text-primary mb-2"></i>
                                            <h4 class="card-title mb-1" id="datenschutzStatsTotal">0</h4>
                                            <p class="card-text text-muted">Abschnitte</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-success">
                                        <div class="card-body">
                                            <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                                            <h4 class="card-title mb-1" id="datenschutzStatsActive">0</h4>
                                            <p class="card-text text-muted">Aktiv</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-warning">
                                        <div class="card-body">
                                            <i class="fas fa-external-link-alt fa-2x text-warning mb-2"></i>
                                            <h4 class="card-title mb-1" id="datenschutzStatsQuickNav">0</h4>
                                            <p class="card-text text-muted">Schnellnav</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-info">
                                        <div class="card-body">
                                            <i class="fas fa-star fa-2x text-info mb-2"></i>
                                            <h4 class="card-title mb-1" id="datenschutzStatsHighlighted">0</h4>
                                            <p class="card-text text-muted">Hervorgehoben</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Datenschutz Sections List -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="fas fa-list me-2"></i>Datenschutz-Abschnitte
                                        <small class="text-muted ms-2">(Drag & Drop zum Sortieren)</small>
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div id="datenschutzSectionsList" class="datenschutz-sections-container">
                                        <!-- Datenschutz sections will be dynamically loaded here -->
                                        <div class="text-center py-5">
                                            <div class="spinner-border text-primary" role="status">
                                                <span class="visually-hidden">Lade Datenschutz-Abschnitte...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Datenschutz Section Edit Modal -->
                <div class="modal fade" id="datenschutzSectionModal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="fas fa-edit me-2"></i>
                                    <span id="datenschutzModalTitle">Datenschutz-Abschnitt bearbeiten</span>
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="datenschutzSectionForm">
                                    <input type="hidden" id="datenschutzSectionId">
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-8">
                                            <label for="datenschutzSectionTitle" class="form-label">Titel <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="datenschutzSectionTitle" required>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="datenschutzSectionIcon" class="form-label">Icon (Font Awesome)</label>
                                            <div class="input-group">
                                                <span class="input-group-text">
                                                    <i id="datenschutzIconPreview" class="fas fa-info-circle"></i>
                                                </span>
                                                <input type="text" class="form-control" id="datenschutzSectionIcon" 
                                                       placeholder="fa-solid fa-info-circle" onkeyup="updateDatenschutzIconPreview()">
                                                <button class="btn btn-outline-secondary" type="button" onclick="showDatenschutzIconSelector()">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                            </div>
                                            <small class="form-text text-muted">z.B. fa-solid fa-info-circle</small>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label for="datenschutzSectionBoxType" class="form-label">Box-Typ</label>
                                            <select class="form-select" id="datenschutzSectionBoxType">
                                                <option value="DEFAULT">Standard (Grau)</option>
                                                <option value="HIGHLIGHT">Hervorgehoben (Gelb)</option>
                                                <option value="IMPORTANT">Wichtig (Rot)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check mt-4">
                                                <input type="checkbox" class="form-check-input" id="datenschutzSectionShowInQuickNav">
                                                <label class="form-check-label" for="datenschutzSectionShowInQuickNav">
                                                    In Schnellnavigation anzeigen
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check mt-4">
                                                <input type="checkbox" class="form-check-input" id="datenschutzSectionIsActive" checked>
                                                <label class="form-check-label" for="datenschutzSectionIsActive">
                                                    Aktiv
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="datenschutzSectionContent" class="form-label">Inhalt <span class="text-danger">*</span></label>
                                        <div id="datenschutzContentEditor" style="height: 400px;"></div>
                                        <textarea id="datenschutzSectionContent" style="display: none;" required></textarea>
                                        <small class="form-text text-muted">
                                            <strong>Hinweis:</strong> Der Editor unterstÃ¼tzt HTML-Formatierung. 
                                            Verwenden Sie <code>&lt;strong&gt;</code> fÃ¼r fett, <code>&lt;em&gt;</code> fÃ¼r kursiv, etc.
                                        </small>
                                    </div>

                                    <!-- Box Type Preview -->
                                    <div class="mb-3">
                                        <label class="form-label">Vorschau des Box-Typs:</label>
                                        <div id="datenschutzBoxPreview" class="p-3 border rounded">
                                            <h6 id="datenschutzPreviewTitle">Beispiel-Titel</h6>
                                            <p id="datenschutzPreviewContent">Hier wird eine Vorschau des Inhalts mit der gewÃ¤hlten Box-Formatierung angezeigt.</p>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>Abbrechen
                                </button>
                                <button type="button" class="btn btn-danger" id="deleteDatenschutzSectionBtn" onclick="deleteDatenschutzSection()" style="display: none;">
                                    <i class="fas fa-trash me-2"></i>LÃ¶schen
                                </button>
                                <button type="button" class="btn btn-primary" onclick="saveDatenschutzSection()">
                                    <i class="fas fa-save me-2"></i>Speichern
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
        </div>
    </main>

    <!-- Fachkompetenz Card Modal -->
    <div class="modal fade" id="fachKompetenzCardModal" tabindex="-1" aria-labelledby="fachKompetenzCardModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="fachKompetenzCardModalTitle">Fachkompetenz-Karte bearbeiten</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="fachKompetenzCardForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="cardTitle" class="form-label">Titel *</label>
                                    <input type="text" class="form-control" id="cardTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="cardIconClass" class="form-label">Icon</label>
                                    <div class="input-group">
                                        <span class="input-group-text" id="iconPreview">
                                            <i class="fa-solid fa-cog" id="iconPreviewIcon"></i>
                                        </span>
                                    <input type="text" class="form-control" id="cardIconClass" 
                                               placeholder="fa-solid fa-cog" value="fa-solid fa-cog" readonly>
                                        <button class="btn btn-outline-secondary" type="button" onclick="showIconSelector()">
                                            <i class="fa-solid fa-icons"></i> AuswÃ¤hlen
                                        </button>
                                    </div>
                                    <small class="form-text text-muted">Font Awesome Icon</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="cardDescription" class="form-label">Beschreibung *</label>
                            <textarea class="form-control" id="cardDescription" rows="3" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="cardBackgroundImage" class="form-label">Hintergrundbild URL</label>
                                    <input type="text" class="form-control" id="cardBackgroundImage" 
                                           placeholder="/content/images/fachkompetenzen-1.webp">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-outline-secondary d-block" type="button" 
                                        onclick="openMediaPickerForFachKompetenzen('cardBackgroundImage')">
                                    <i class="fas fa-image"></i> AuswÃ¤hlen
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Features/Tags</label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" id="newCardFeature" 
                                       placeholder="Feature hinzufÃ¼gen...">
                                <button class="btn btn-outline-primary" type="button" id="addCardFeature">
                                    <i class="fas fa-plus"></i> HinzufÃ¼gen
                                </button>
                            </div>
                            <div id="cardFeaturesList"></div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="cardIsVisible" checked>
                            <label class="form-check-label" for="cardIsVisible">
                                Karte sichtbar
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelFachKompetenzCard">Abbrechen</button>
                    <button type="button" class="btn btn-primary" id="saveFachKompetenzCard">
                        <i class="fas fa-save me-2"></i>Speichern
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Modal -->
    <div class="modal fade" id="serviceModal" tabindex="-1" aria-labelledby="serviceModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="serviceModalTitle">
                        <i class="fas fa-tools me-2"></i>Service bearbeiten
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="serviceForm">
                        <input type="hidden" id="serviceId">
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="serviceTitle" class="form-label">Titel</label>
                                <input type="text" class="form-control" id="serviceTitle" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="serviceOrder" class="form-label">Reihenfolge</label>
                                <input type="number" class="form-control" id="serviceOrder" min="0" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="serviceSubtitle" class="form-label">Untertitel</label>
                            <input type="text" class="form-control" id="serviceSubtitle">
                        </div>
                        <div class="mb-3">
                            <label for="serviceDescription" class="form-label">Beschreibung</label>
                            <textarea class="form-control" id="serviceDescription" rows="4" required></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="serviceIconClass" class="form-label">Icon-Klasse</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="serviceIconClass" readonly 
                                           placeholder="fas fa-handshake" required>
                                    <button type="button" class="btn btn-outline-secondary" onclick="showIconSelector()">
                                        AuswÃ¤hlen
                                    </button>
                                    <span class="input-group-text">
                                        <i id="serviceIconPreview" class="fas fa-question"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="serviceIconColor" class="form-label">Icon-Farbe</label>
                                <input type="color" class="form-control form-control-color" id="serviceIconColor" value="#ffd401">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="serviceBackgroundImage" class="form-label">Hintergrundbild</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="serviceBackgroundImage" 
                                       placeholder="/content/images/leistungen-1.jpg">
                                <button type="button" class="btn btn-outline-secondary" 
                                        onclick="openMediaPickerForServices('serviceBackgroundImage')">
                                    <i class="fas fa-folder-open"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="serviceFeatures" class="form-label">Features (eine pro Zeile)</label>
                            <textarea class="form-control" id="serviceFeatures" rows="3" 
                                      placeholder="ð¯ Vor-Ort-Termin&#10;ð¸ Fotomontage&#10;ð Vermessung"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="serviceCtaText" class="form-label">Button-Text</label>
                                <input type="text" class="form-control" id="serviceCtaText" value="Service anfragen">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Sichtbarkeit</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="serviceIsVisible" checked>
                                    <label class="form-check-label" for="serviceIsVisible">
                                        Sichtbar
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="button" class="btn btn-danger" id="deleteService" style="display: none;">
                        <i class="fas fa-trash me-2"></i>LÃ¶schen
                    </button>
                    <button type="button" class="btn btn-primary" id="saveService">
                        <i class="fas fa-save me-2"></i>Speichern
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Quill Rich Text Editor -->
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    
    <!-- SheetJS for Excel export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Auth Check moved to admin.js -->
    
    <!-- Custom JS -->
    <script src="/cms-admin/assets/js/admin.js"></script>
    
    <!-- Enhanced Header Functions -->
    <script>
        // Enhanced Header Functionality
        class HeaderManager {
            constructor() {
                this.init();
            }

            init() {
                this.updateCurrentTime();
                // Delay user info loading to avoid rate limiting
                setTimeout(() => this.loadUserInfo(), 2000);
                // Delay server status check
                setTimeout(() => this.checkServerStatus(), 1000);
                
                // Update time every minute
                setInterval(() => this.updateCurrentTime(), 60000);
                
                // Update server status every 2 minutes (reduced frequency)
                setInterval(() => this.checkServerStatus(), 120000);
                
                // Retry user info every 5 minutes if we have a token but shows "Nicht angemeldet"
                setInterval(() => {
                    const authToken = localStorage.getItem('accessToken');
                    const currentText = document.getElementById('current-user-name').textContent;
                    if (authToken && (currentText === 'Nicht angemeldet' || currentText === 'Admin')) {
                        this.loadUserInfo();
                    }
                }, 5 * 60 * 1000);
            }

            updateCurrentTime() {
                const now = new Date();
                const timeString = now.toLocaleString('de-DE', {
                    hour: '2-digit',
                    minute: '2-digit',
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                document.getElementById('current-time').textContent = timeString;
            }

            async loadUserInfo() {
                // Check if user info is already cached in sessionStorage
                const cachedUserInfo = sessionStorage.getItem('headerUserInfo');
                if (cachedUserInfo) {
                    try {
                        const data = JSON.parse(cachedUserInfo);
                        const userName = data.name || 'Admin';
                        document.getElementById('current-user-name').textContent = userName;
                        document.getElementById('user-info').textContent = `Angemeldet als ${userName}`;
                        document.getElementById('sidebar-user-name').textContent = userName;
                        return;
                    } catch (e) {
                        // Clear invalid cache
                        sessionStorage.removeItem('headerUserInfo');
                    }
                }

                try {
                    // Get auth token from localStorage (same as admin.js)
                    const authToken = localStorage.getItem('accessToken');
                    const headers = {
                        'Content-Type': 'application/json'
                    };
                    
                    if (authToken) {
                        headers['Authorization'] = `Bearer ${authToken}`;
                    }
                    
                    const response = await fetch('/api/auth/session-info', {
                        credentials: 'include',
                        headers: headers
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.user) {
                            const userName = data.user.name || 'Admin';
                            document.getElementById('current-user-name').textContent = userName;
                            document.getElementById('user-info').textContent = `Angemeldet als ${userName}`;
                            document.getElementById('sidebar-user-name').textContent = userName;
                            
                            // Cache user info for 10 minutes
                            sessionStorage.setItem('headerUserInfo', JSON.stringify(data.user));
                            setTimeout(() => {
                                sessionStorage.removeItem('headerUserInfo');
                            }, 10 * 60 * 1000);
                        }
                    } else if (response.status === 429) {
                        console.warn('Rate limited - using default user name');
                        document.getElementById('current-user-name').textContent = 'Admin';
                        document.getElementById('user-info').textContent = 'Angemeldet als Admin';
                        document.getElementById('sidebar-user-name').textContent = 'Admin';
                    } else if (response.status === 401) {
                        // Check if we have a token but it's invalid
                        if (authToken) {
                            console.warn('Auth token invalid or expired');
                            // Remove invalid token
                            localStorage.removeItem('accessToken');
                        }
                        document.getElementById('current-user-name').textContent = 'Nicht angemeldet';
                        document.getElementById('user-info').textContent = 'Bitte anmelden';
                        document.getElementById('sidebar-user-name').textContent = 'Nicht angemeldet';
                        // Clear cached user info if unauthorized
                        sessionStorage.removeItem('headerUserInfo');
                    }
                } catch (error) {
                    console.error('Error loading user info:', error);
                    // Fallback to default
                    document.getElementById('current-user-name').textContent = 'Admin';
                    document.getElementById('user-info').textContent = 'Angemeldet als Admin';
                    document.getElementById('sidebar-user-name').textContent = 'Admin';
                }
            }

            async checkServerStatus() {
                try {
                    // Use shorter timeout for health check
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch('/api/health', {
                        signal: controller.signal,
                        cache: 'no-cache'
                    });
                    
                    clearTimeout(timeoutId);
                    const statusIndicator = document.querySelector('.status-indicator .badge');
                    
                    if (response.ok) {
                        statusIndicator.className = 'badge bg-success';
                        statusIndicator.innerHTML = '<i class="fas fa-circle me-1" style="font-size: 0.6rem;"></i>Server Online';
                    } else if (response.status === 429) {
                        statusIndicator.className = 'badge bg-warning';
                        statusIndicator.innerHTML = '<i class="fas fa-clock me-1" style="font-size: 0.6rem;"></i>Rate Limited';
                    } else {
                        statusIndicator.className = 'badge bg-warning';
                        statusIndicator.innerHTML = '<i class="fas fa-exclamation-triangle me-1" style="font-size: 0.6rem;"></i>Server Warnung';
                    }
                } catch (error) {
                    const statusIndicator = document.querySelector('.status-indicator .badge');
                    if (error.name === 'AbortError') {
                        statusIndicator.className = 'badge bg-warning';
                        statusIndicator.innerHTML = '<i class="fas fa-clock me-1" style="font-size: 0.6rem;"></i>Timeout';
                    } else {
                        statusIndicator.className = 'badge bg-danger';
                        statusIndicator.innerHTML = '<i class="fas fa-times me-1" style="font-size: 0.6rem;"></i>Server Offline';
                    }
                }
            }





            // Force refresh user info (called after login)
            refreshUserInfo() {
                sessionStorage.removeItem('headerUserInfo');
                this.loadUserInfo();
            }
        }

        // Quick Create Functions
        function createNewCustomer() {

            showSection('customers-section');
            // Trigger new customer modal
            setTimeout(() => {
                if (typeof showCustomerModal === 'function') {
                    showCustomerModal();
                }
            }, 100);
        }

        function createNewJob() {

            showSection('special-pages-section');
            // Focus on jobs tab
            setTimeout(() => {
                const jobsTab = document.getElementById('jobs-tab');
                if (jobsTab) {
                    jobsTab.click();
                    setTimeout(() => {
                        if (typeof showSpecialPageModal === 'function') {
                            showSpecialPageModal('job');
                        }
                    }, 100);
                }
            }, 100);
        }

        function createNewNews() {

            showSection('special-pages-section');
            // Focus on news tab
            setTimeout(() => {
                const newsTab = document.getElementById('news-tab');
                if (newsTab) {
                    newsTab.click();
                    setTimeout(() => {
                        if (typeof showSpecialPageModal === 'function') {
                            showSpecialPageModal('news');
                        }
                    }, 100);
                }
            }, 100);
        }

        function createNewNewsletter() {

            showSection('newsletter-section');
            // Focus on templates
            setTimeout(() => {
                const templatesTab = document.querySelector('[data-bs-target="#newsletter-templates"]');
                if (templatesTab) {
                    templatesTab.click();
                }
            }, 100);
        }

        function showPasswordChangeModal() {

            // Trigger password change modal
            if (typeof showPasswordModal === 'function') {
                showPasswordModal();
            } else {
                // Fallback - show in settings
                showSection('settings-section');
                setTimeout(() => {
                    const securityTab = document.querySelector('[href="#security-settings"]');
                    if (securityTab) {
                        securityTab.click();
                    }
                }, 100);
            }
        }

        function confirmLogout() {
            if (confirm('MÃ¶chten Sie sich wirklich abmelden?')) {
                // Clear section persistence and perform logout
                localStorage.removeItem('currentCMSSection');
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminEmail');
                
                setTimeout(() => {
                    window.location.href = '/cms-admin/login.html';
                }, 1000);
            }
        }

        // Temporary showSection wrapper to ensure localStorage is saved
        window.tempShowSection = function(sectionName) {
            console.log(`ð tempShowSection called with: ${sectionName}`);
            localStorage.setItem('currentCMSSection', sectionName);
            console.log(`ð¾ Saved to localStorage: ${sectionName}`);
            
            if (typeof window.showSection === 'function') {
                console.log(`â Delegating to real showSection: ${sectionName}`);
                window.showSection(sectionName);
                // Ensure localStorage is still correct after showSection call
                setTimeout(() => {
                    const current = localStorage.getItem('currentCMSSection');
                    if (current !== sectionName) {
                        console.log(`ð Re-correcting localStorage: ${current} â ${sectionName}`);
                        localStorage.setItem('currentCMSSection', sectionName);
                    }
                }, 10);
            } else {
                console.log(`â³ Real showSection not ready, will try later...`);
                // Try again in a moment
                setTimeout(() => {
                    if (typeof window.showSection === 'function') {
                        console.log(`â Delayed call to showSection: ${sectionName}`);
                        window.showSection(sectionName);
                        // Ensure localStorage is still correct after delayed call
                        setTimeout(() => {
                            const current = localStorage.getItem('currentCMSSection');
                            if (current !== sectionName) {
                                console.log(`ð Re-correcting localStorage after delay: ${current} â ${sectionName}`);
                                localStorage.setItem('currentCMSSection', sectionName);
                            }
                        }, 10);
                    }
                }, 100);
            }
        };

        // Page Persistence - Restore last section after refresh
        function initPagePersistence() {
            console.log('ð§ Initializing page persistence...');
            
            let attempts = 0;
            const maxAttempts = 20;
            
            function tryRestore() {
                attempts++;
                console.log(`ð Persistence attempt ${attempts}: checking showSection availability`);
                
                if (typeof window.showSection === 'function') {
                    const savedSection = localStorage.getItem('currentCMSSection');
                    console.log(`ð± Retrieved saved section: ${savedSection}`);
                    
                    if (savedSection && savedSection !== 'dashboard-section') {
                        const element = document.getElementById(savedSection);
                        if (element) {
                            console.log(`â Restoring to: ${savedSection}`);
                            window.showSection(savedSection);
                            return;
                        } else {
                            console.warn(`â Element not found for: ${savedSection}`);
                        }
                    }
                    
                    console.log('ð Defaulting to dashboard');
                    window.showSection('dashboard-section');
                } else if (attempts < maxAttempts) {
                    console.log(`â³ showSection not ready, retrying in 100ms (${attempts}/${maxAttempts})`);
                    setTimeout(tryRestore, 100);
                } else {
                    console.error('â showSection never became available after 2 seconds');
                }
            }
            
            // Start after a delay to ensure all scripts are loaded
            setTimeout(tryRestore, 300);
        }

        // Initialize header manager
        let headerManager;
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ð Index.html DOMContentLoaded fired');
            headerManager = new HeaderManager();
            
            // Initialize page persistence
            initPagePersistence();
            
            // Test: Manually check localStorage for debugging
            console.log('ð§ª DEBUG: localStorage content:', localStorage.getItem('currentCMSSection'));
            
            // Add localStorage monitoring
            setTimeout(() => {
                console.log('ð localStorage check after 1 second:', localStorage.getItem('currentCMSSection'));
            }, 1000);
            
            setTimeout(() => {
                console.log('ð localStorage check after 2 seconds:', localStorage.getItem('currentCMSSection'));
            }, 2000);
            
            // Page title observer removed - sections manage their own titles
        });
    </script>
    
    <!-- Media Picker -->
    <script src="/cms-admin/assets/js/media-picker.js"></script>
    
    <!-- Special Pages -->
    <script src="/cms-admin/assets/js/special-pages.js"></script>
    
    <!-- Documentation Functions -->
    <script src="/cms-admin/assets/js/docs-functions.js"></script>
    
    <!-- Company History Functions -->
    <script src="/cms-admin/assets/js/company-history.js"></script>
    
    <!-- Icon Selector Modal -->
    <div class="modal fade" id="iconSelectorModal" tabindex="-1" aria-labelledby="iconSelectorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="iconSelectorModalLabel">Icon auswÃ¤hlen</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <input type="text" class="form-control" id="iconSearchInput" placeholder="Icons suchen..." onkeyup="filterIcons()">
                        </div>
                        <div class="col-md-6">
                            <select class="form-select" id="iconCategorySelect" onchange="filterIcons()">
                                <option value="">Alle Kategorien (500+ Icons)</option>
                                <option value="business">Business & Finance (100+ Icons)</option>
                                <option value="tools">Werkzeuge & Handwerk (80+ Icons)</option>
                                <option value="tech">Technologie & Computer (100+ Icons)</option>
                                <option value="transport">Transport & Fahrzeuge (50+ Icons)</option>
                                <option value="design">Design & KreativitÃ¤t (80+ Icons)</option>
                                <option value="medical">Medizin & Gesundheit (30+ Icons)</option>
                                <option value="nature">Natur & Wetter (40+ Icons)</option>
                                <option value="misc">Sonstiges & Symbole (100+ Icons)</option>
                            </select>
                        </div>
                    </div>
                    <div id="iconGrid" class="row" style="max-height: 400px; overflow-y: auto;">
                        <!-- Icons werden hier dynamisch eingefÃ¼gt -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Icon Data -->
    <script src="/cms-admin/assets/js/icon-data.js"></script>
    
    <!-- Fachkompetenzen Functions -->
    <script src="/cms-admin/assets/js/fachkompetenzen.js"></script>
    
    <!-- Dienstleistungen Functions -->
    <script src="/cms-admin/assets/js/dienstleistungen.js"></script>
    
    <!-- Newsletter Designer JS -->
    <script src="/cms-admin/assets/js/newsletter-designer.js"></script>
    
    <!-- Newsletter Subscribers Management JS -->
    <script src="/cms-admin/assets/js/newsletter-subscribers.js"></script>
    
    <!-- Modal Focus Management & Performance Optimization -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Fix Bootstrap Modal aria-hidden focus issues
        const modals = document.querySelectorAll('.modal');
        
        modals.forEach(modal => {
            // Prevent focus trap on hidden modals
            modal.addEventListener('hidden.bs.modal', function() {
                // Remove focus from any buttons inside the modal
                const focusedElement = modal.querySelector(':focus');
                if (focusedElement) {
                    focusedElement.blur();
                }
                
                // Restore focus to body or a safe element
                const mainContent = document.querySelector('.main-content') || document.body;
                if (mainContent && mainContent.focus) {
                    mainContent.tabIndex = -1;
                    mainContent.focus();
                }
            });
            
            // Clean up aria-hidden conflicts
            modal.addEventListener('show.bs.modal', function() {
                modal.removeAttribute('aria-hidden');
            });
            
            modal.addEventListener('hide.bs.modal', function() {
                // Make sure no elements inside keep focus when hiding
                const focusedElement = modal.querySelector(':focus');
                if (focusedElement) {
                    focusedElement.blur();
                }
            });
        });
        
        // Performance optimization - Debounce dashboard loading
        let loadingStates = new Map();
        
        window.optimizedLoadDashboard = function(section) {
            if (loadingStates.get(section)) {
                console.log(`ð« ${section} already loading, skipping duplicate request`);
                return;
            }
            
            loadingStates.set(section, true);
            
            setTimeout(() => {
                loadingStates.delete(section);
            }, 1000); // Reset after 1 second
            
            console.log(`â Loading ${section} dashboard`);
        };
        
        // Override problematic multiple loadings
        const originalConsoleLog = console.log;
        let logBuffer = [];
        let logTimeout;
        
        // Production-aware console logging
        const isDevelopment = window.location.hostname === 'localhost' || 
                            window.location.hostname === '127.0.0.1' ||
                            window.location.search.includes('debug=true');
        
        console.log = function(...args) {
            const message = args.join(' ');
            
            // In production, only show important logs
            if (!isDevelopment) {
                const hasImportantIndicator = /[ð¯ðâââ ï¸ðð§]/u.test(message) ||
                                           message.includes('ERROR') ||
                                           message.includes('FAILED');
                if (!hasImportantIndicator) return;
            }
            
            // Suppress duplicate success messages
            if (message.includes('SUCCESS:') || message.includes('DIENSTLEISTUNGEN SUCCESS:')) {
                logBuffer.push(message);
                clearTimeout(logTimeout);
                logTimeout = setTimeout(() => {
                    const uniqueMessages = [...new Set(logBuffer)];
                    uniqueMessages.forEach(msg => originalConsoleLog(msg));
                    logBuffer = [];
                }, 100);
                return;
            }
            originalConsoleLog.apply(console, args);
        };
    });
    </script>
</body>
</html> 